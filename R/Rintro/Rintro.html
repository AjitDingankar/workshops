<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2016-11-09 Wed 13:51 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Introduction to R</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Ista Zahn" />
<link rel="stylesheet" type="text/css" href="http://tutorials.iq.harvard.edu/org-html-themes/styles/readtheorg/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="http://tutorials.iq.harvard.edu/org-html-themes/styles/readtheorg/css/readtheorg.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="http://tutorials.iq.harvard.edu/org-html-themes/styles/readtheorg/js/readtheorg.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.0/gh-fork-ribbon.min.css" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Introduction to R</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org386a69c">Workshop Materials and Introduction</a>
<ul>
<li><a href="#org11744a7">Materials and setup</a></li>
<li><a href="#org758656e">What is R?</a></li>
<li><a href="#org8e2a5b3">InspiRation</a></li>
<li><a href="#org81bdebd">Coming to R</a></li>
</ul>
</li>
<li><a href="#org6bf9bfe">Graphical User Interfaces (GUIs)</a>
<ul>
<li><a href="#org6d0eb2b">R GUI alternatives</a></li>
<li><a href="#orgeac15bd">Launch RStudio&#xa0;&#xa0;&#xa0;<span class="tag"><span class="labsetup">labsetup</span></span></a></li>
<li><a href="#org1c74e1a">Exercise 0</a></li>
<li><a href="#org02a6ed8">Exercise 0 solution&#xa0;&#xa0;&#xa0;<span class="tag"><span class="prototype">prototype</span></span></a></li>
</ul>
</li>
<li><a href="#orgbddb453">Data and Functions</a>
<ul>
<li><a href="#org8deae1b">Assignment</a></li>
<li><a href="#orgab9816d">Data types and conversion</a></li>
<li><a href="#orga3d58bb">Functions</a></li>
</ul>
</li>
<li><a href="#orgd5bbf19">Asking R for help</a></li>
<li><a href="#orgb44e56a">R packages</a>
<ul>
<li><a href="#orge4b1082">Exercise 1</a></li>
<li><a href="#org3f62103">Exercise 1 solution&#xa0;&#xa0;&#xa0;<span class="tag"><span class="prototype">prototype</span></span></a></li>
</ul>
</li>
<li><a href="#orgf1474a4">Getting data into R</a>
<ul>
<li><a href="#orgf8e404d">The baby names data set</a></li>
<li><a href="#org1c83d78">The "working directory" and listing files</a></li>
<li><a href="#org3841252">Readers for common file types</a></li>
<li><a href="#orgab1d4b3">Exercise 2</a></li>
<li><a href="#org9660e3b">Exercise 2 solution&#xa0;&#xa0;&#xa0;<span class="tag"><span class="prototype">prototype</span></span></a></li>
<li><a href="#orgbe2fbde">Checking imported data</a></li>
</ul>
</li>
<li><a href="#org2894223">Data Manipulation</a>
<ul>
<li><a href="#org638fad8">data.frame objects</a></li>
<li><a href="#org14102c3">Slice and Filter data.frames rows</a></li>
<li><a href="#org78ec638">Select data.frame columns</a></li>
<li><a href="#org573f1a2">Adding, removing, and modifying data.frame columns</a></li>
<li><a href="#orgc538081">Exporting Data</a></li>
<li><a href="#org32307c9">Saving and loading R  workspaces</a></li>
<li><a href="#org21c0451">Exercise 3: Data manipulation</a></li>
<li><a href="#org6362867">Exercise 3 solution&#xa0;&#xa0;&#xa0;<span class="tag"><span class="prototype">prototype</span></span></a></li>
</ul>
</li>
<li><a href="#org34832c8">Basic Statistics and Graphs</a>
<ul>
<li><a href="#org22cfece">Basic statistics</a></li>
<li><a href="#orgee8128e">Statistics by grouping variable(s)</a></li>
<li><a href="#orgc50f2f8">Save R output to a file</a></li>
<li><a href="#org5685e03">Exercise 4</a></li>
<li><a href="#orgf425c3f">Exercise 4 solution&#xa0;&#xa0;&#xa0;<span class="tag"><span class="prototype">prototype</span></span></a></li>
<li><a href="#org89888d5">Basic graphics: Frequency bars</a></li>
<li><a href="#orgaef74b7">Basic graphics: Boxplots by group</a></li>
<li><a href="#org032a011">Basic graphics: Mosaic chart</a></li>
<li><a href="#org52e1eee">Basic graphics: scatter plot</a></li>
<li><a href="#org1d1eb19">Exercise 5 TBD</a></li>
</ul>
</li>
<li><a href="#orgbdb3517">Wrap-up</a>
<ul>
<li><a href="#org595a3c9">Help us make this workshop better!</a></li>
<li><a href="#org2fd43d0">Additional resources</a></li>
</ul>
</li>
</ul>
</div>
</div>
<a class="github-fork-ribbon right-top" href="https://github.com/izahn/workshops" title="Fork me on GitHub">Fork me on GitHub</a>

<div id="outline-container-org386a69c" class="outline-2">
<h2 id="org386a69c">Workshop Materials and Introduction</h2>
<div class="outline-text-2" id="text-org386a69c">
<div class="materials-no-ipynb">
</div>

<div id="outline-container-org11744a7" class="outline-3">
<h3 id="org11744a7">Materials and setup</h3>
<div class="outline-text-3" id="text-org11744a7">
<p>
You should have R installed &#x2013;if not:
</p>
<ul class="org-ul">
<li>Open a web browser and go to <a href="http://cran.r-project.org">http://cran.r-project.org</a> and download and install it</li>
<li>Also helpful to install RStudio (download from <a href="http://rstudio.com">http://rstudio.com</a>)</li>
</ul>

<p>
Download workshop materials:
</p>
<ul class="org-ul">
<li>Download materials from <a href="http://tutorials.iq.harvard.edu/R/Rintro.zip">http://tutorials.iq.harvard.edu/R/Rintro.zip</a></li>
<li>Extract the zip file containing the materials to your desktop</li>
</ul>

</div>
</div>
</div>

<div id="outline-container-org758656e" class="outline-3">
<h3 id="org758656e">What is R?</h3>
<div class="outline-text-3" id="text-org758656e">
<p>
R is a <i>programming language designed for statistical computing</i>. Notable characteristics include:
</p>
<ul class="org-ul">
<li>Vast capabilities, wide range of statistical and graphical techniques</li>
<li>Very popular in academia, growing popularity in business: <a href="http://r4stats.com/articles/popularity/">http://r4stats.com/articles/popularity/</a></li>
<li>Written primarily by statisticians</li>
<li>FREE (no cost, open source)</li>
<li>Excellent community support: mailing list, blogs, tutorials</li>
<li>Easy to extend by writing new functions</li>
</ul>
</div>
</div>

<div id="outline-container-org8e2a5b3" class="outline-3">
<h3 id="org8e2a5b3">InspiRation</h3>
<div class="outline-text-3" id="text-org8e2a5b3">
<p>
OK, it's free and popular, but what makes R worth learning? In a word,
"packages". If you have a data manipulation, analysis or visualization
task, chances are good that there is an R package for that. For example:
</p>

<ul class="org-ul">
<li>Want to find out where we are?</li>
</ul>
<div class="org-src-container">
<pre class="src src-R"><span style="color: #4e3163;">library</span><span style="color: #3a81c3;">(</span>ggmap<span style="color: #3a81c3;">)</span>
nwbuilding <span style="color: #4e3163;">&lt;-</span> <span style="color: #6c3163; font-weight: bold;">geocode</span><span style="color: #3a81c3;">(</span><span style="color: #2d9574;">"1737 Cambridge Street Cambridge, MA 02138"</span>, <span style="color: #4e3163;">source</span> <span style="color: #4e3163;">=</span> <span style="color: #2d9574;">"google"</span><span style="color: #3a81c3;">)</span> 
<span style="color: #6c3163; font-weight: bold;">ggmap</span><span style="color: #3a81c3;">(</span><span style="color: #6c3163; font-weight: bold;">get_map</span><span style="color: #3a81c3;">(</span><span style="color: #2d9574;">"Cambridge, MA"</span>, zoom <span style="color: #4e3163;">=</span> <span style="color: #4e3163;">15</span><span style="color: #3a81c3;">))</span> <span style="color: #4e3163;">+</span>
  <span style="color: #6c3163; font-weight: bold;">geom_point</span><span style="color: #3a81c3;">(</span>data<span style="color: #4e3163;">=</span>nwbuilding, size <span style="color: #4e3163;">=</span> <span style="color: #4e3163;">7</span>, shape <span style="color: #4e3163;">=</span> <span style="color: #4e3163;">13</span>, color <span style="color: #4e3163;">=</span> <span style="color: #2d9574;">"red"</span><span style="color: #3a81c3;">)</span>
</pre>
</div>


<div class="figure">
<p><img src="images/hereweare.png" alt="hereweare.png" />
</p>
</div>

<ul class="org-ul">
<li>Want to forecast the population of Australia?</li>
</ul>
<div class="org-src-container">
<pre class="src src-R"><span style="color: #4e3163;">library</span><span style="color: #3a81c3;">(</span>forecast<span style="color: #3a81c3;">)</span>
fit <span style="color: #4e3163;">&lt;-</span> <span style="color: #6c3163; font-weight: bold;">auto.arima</span><span style="color: #3a81c3;">(</span>austres<span style="color: #3a81c3;">)</span>
<span style="color: #2aa1ae;">## </span><span style="color: #2aa1ae;">Projected numbers (in thousands) of Australian residents</span>
<span style="color: #6c3163; font-weight: bold;">plot</span><span style="color: #3a81c3;">(</span><span style="color: #6c3163; font-weight: bold;">forecast</span><span style="color: #3a81c3;">(</span>fit<span style="color: #3a81c3;">))</span>
</pre>
</div>


<div class="figure">
<p><img src="images/austop.png" alt="austop.png" />
</p>
</div>


<ul class="org-ul">
<li>Want to interactively explore the shape of the Churyumov–Gerasimenko comet?</li>
</ul>
<div class="org-src-container">
<pre class="src src-R"><span style="color: #4e3163;">library</span><span style="color: #3a81c3;">(</span>plotly<span style="color: #3a81c3;">)</span>
comet <span style="color: #4e3163;">&lt;-</span> rgl::<span style="color: #6c3163; font-weight: bold;">readOBJ</span><span style="color: #3a81c3;">(</span><span style="color: #6c3163; font-weight: bold;">url</span><span style="color: #3a81c3;">(</span><span style="color: #2d9574;">"http://sci.esa.int/science-e/www/object/doc.cfm?fobjectid=54726"</span><span style="color: #3a81c3;">))</span>

comet.plot <span style="color: #4e3163;">&lt;-</span> <span style="color: #6c3163; font-weight: bold;">plot_ly</span><span style="color: #3a81c3;">(</span>x <span style="color: #4e3163;">=</span> comet$vb<span style="color: #3a81c3;">[</span><span style="color: #4e3163;">1</span>,<span style="color: #3a81c3;">]</span>,
                      y <span style="color: #4e3163;">=</span> comet$vb<span style="color: #3a81c3;">[</span><span style="color: #4e3163;">2</span>,<span style="color: #3a81c3;">]</span>,
                      z <span style="color: #4e3163;">=</span> comet$vb<span style="color: #3a81c3;">[</span><span style="color: #4e3163;">3</span>,<span style="color: #3a81c3;">]</span>,
                      i <span style="color: #4e3163;">=</span> comet$it<span style="color: #3a81c3;">[</span><span style="color: #4e3163;">1</span>,<span style="color: #3a81c3;">]</span><span style="color: #4e3163;">-</span><span style="color: #4e3163;">1</span>,
                      j<span style="color: #4e3163;">=</span> comet$it<span style="color: #3a81c3;">[</span><span style="color: #4e3163;">2</span>,<span style="color: #3a81c3;">]</span><span style="color: #4e3163;">-</span><span style="color: #4e3163;">1</span>,
                      k <span style="color: #4e3163;">=</span> comet$it<span style="color: #3a81c3;">[</span><span style="color: #4e3163;">3</span>,<span style="color: #3a81c3;">]</span><span style="color: #4e3163;">-</span><span style="color: #4e3163;">1</span>,
                      type <span style="color: #4e3163;">=</span> <span style="color: #2d9574;">"mesh3d"</span><span style="color: #3a81c3;">)</span>

<span style="color: #6c3163; font-weight: bold;">setwd</span><span style="color: #3a81c3;">(</span><span style="color: #2d9574;">"images"</span><span style="color: #3a81c3;">)</span>
htmlwidgets::<span style="color: #6c3163; font-weight: bold;">saveWidget</span><span style="color: #3a81c3;">(</span>comet.plot, file <span style="color: #4e3163;">=</span> <span style="color: #2d9574;">"comet.html"</span><span style="color: #3a81c3;">)</span>
<span style="color: #6c3163; font-weight: bold;">setwd</span><span style="color: #3a81c3;">(</span><span style="color: #2d9574;">".."</span><span style="color: #3a81c3;">)</span>

comet.plot
</pre>
</div>

<iframe src="images/comet.html" width=600 height=350 scrolling=no seamless></iframe>

<p>
Whatever you're trying to do, you're probably not the first to try doing it R. Chances are good that someone has already written a package for that.
</p>
</div>
</div>

<div id="outline-container-org81bdebd" class="outline-3">
<h3 id="org81bdebd">Coming to R</h3>
<div class="outline-text-3" id="text-org81bdebd">
<p>
Coming from&#x2026;
</p>
<dl class="org-dl">
<dt>Stata</dt><dd><a href="http://www.princeton.edu/~otorres/RStata.pdf">http://www.princeton.edu/~otorres/RStata.pdf</a></dd>
<dt>SAS/SPSS</dt><dd><a href="http://www.et.bs.ehu.es/~etptupaf/pub/R/RforSAS&amp;SPSSusers.pdf">http://www.et.bs.ehu.es/~etptupaf/pub/R/RforSAS&amp;SPSSusers.pdf</a></dd>
<dt>matlab</dt><dd><a href="http://www.math.umaine.edu/~hiebeler/comp/matlabR.pdf">http://www.math.umaine.edu/~hiebeler/comp/matlabR.pdf</a></dd>
<dt>Python</dt><dd><a href="http://mathesaurus.sourceforge.net/matlab-python-xref.pdf">http://mathesaurus.sourceforge.net/matlab-python-xref.pdf</a></dd>
</dl>
</div>
</div>
</div>

<div id="outline-container-org6bf9bfe" class="outline-2">
<h2 id="org6bf9bfe">Graphical User Interfaces (GUIs)</h2>
<div class="outline-text-2" id="text-org6bf9bfe">
</div><div id="outline-container-org6d0eb2b" class="outline-3">
<h3 id="org6d0eb2b">R GUI alternatives</h3>
<div class="outline-text-3" id="text-org6d0eb2b">
<p>
The old-school way is to run R directly in a terminal
</p>


<div class="figure">
<p><img src="images/Rconsole.png" alt="Rconsole.png" width="95%" />
</p>
</div>

<p>
But hardly anybody does it that way anymore! The Windows version of R comes with a GUI that looks like this:
</p>


<div class="figure">
<p><img src="images/Rgui.png" alt="Rgui.png" width="95%" />
</p>
</div>

<p>
The default windows GUI is not very good
</p>
<ul class="org-ul">
<li>No parentheses matching or syntax highlighting</li>
<li>No work-space browser</li>
</ul>

<p>
RStudio (an alternative GUI for R) is shown below.
</p>

<div class="figure">
<p><img src="images/Rstudio.png" alt="Rstudio.png" width="95%" />
</p>
</div>

<p>
Rstudio has many useful features, including parentheses matching and auto-completion. Rstudio is not the only advanced R interface; other alteratives include Emacs with ESS (shown below).
</p>


<div class="figure">
<p><img src="images/emacs.png" alt="emacs.png" width="95%" />
</p>
</div>

<p>
Emacs + ESS is a very powerful combination, but can be difficult to set up.
</p>


<div class="figure">
<p><img src="images/Jupyter.png" alt="Jupyter.png" width="95%" />
</p>
</div>

<p>
Jupyter is a notebook interface that runs in your web browser. A lot of people like it. You can access these workshop notes as a Jupyter notebook at <a href="http://tutorials-live.iq.harvard.edu:8000/notebooks/workshops/R/Rintro/Rintro.ipynb">http://tutorials-live.iq.harvard.edu:8000/notebooks/workshops/R/Rintro/Rintro.ipynb</a>
</p>
</div>
</div>

<div id="outline-container-orgeac15bd" class="outline-3">
<h3 id="orgeac15bd">Launch RStudio&#xa0;&#xa0;&#xa0;<span class="tag"><span class="labsetup">labsetup</span></span></h3>
<div class="outline-text-3" id="text-orgeac15bd">
<ul class="org-ul">
<li>Open the RStudio program</li>
<li>Open up today's R script
<ul class="org-ul">
<li>In RStudio, Go to <b>File =&gt; Open Script</b></li>
<li>Locate and open the <code>Rintro.R</code> script in the Rintro folder on your desktop</li>
</ul></li>
<li>Go to <b>Tools =&gt; Set working directory =&gt; To source file location</b> (more on the working directory later)</li>
<li>I encourage you to add your own notes to this file! Every line that starts with <code>#</code> is a comment that will be ignored by R. My comments all start with <code>##</code>; you can add your own, possibly using <code>#</code> or <code>###</code> to distinguish your comments from mine.</li>
</ul>
</div>
</div>


<div id="outline-container-org1c74e1a" class="outline-3">
<h3 id="org1c74e1a">Exercise 0</h3>
<div class="outline-text-3" id="text-org1c74e1a">
<p>
The purpose of this exercise is mostly to give you an opportunity to explore the interface provided by RStudio (or whichever GUI you've decided to use). You may not know how to do these things; that's fine! This is an opportunity to learn. If you don't know how to do something you can can use internet search engines, search on <a href="http:stackoverflow.com">StackOverflow</a>, or ask the person next to you.
</p>

<p>
Also keep in mind that we are living in a golden age of tab completion. If you don't know the name of an R function, try guessing the first two or three letters and pressing TAB. If you guessed correctly the function you are looking for should appear in a pop up! 
</p>

<ol class="org-ol">
<li>Try to get R to add 2 plus 2.</li>
<li>Try to calculate the square root of 10.</li>
<li>There is an R package named <code>car</code> (Companion to Applied Regression). Try to install this package.</li>
<li>R includes extensive documentation, including a file named "An introduction to R". Try to find this help file.</li>
<li>Open a web browser, go to <a href="http://cran.r-project.org/web/views/">http://cran.r-project.org/web/views/</a> and skim the topic closest to your field/interests.</li>
</ol>
</div>
</div>

<div id="outline-container-org02a6ed8" class="outline-3">
<h3 id="org02a6ed8">Exercise 0 solution&#xa0;&#xa0;&#xa0;<span class="tag"><span class="prototype">prototype</span></span></h3>
<div class="outline-text-3" id="text-org02a6ed8">
<ol class="org-ol">
<li value="1">] Add 2 plus 2.</li>
</ol>
<div class="org-src-container">
<pre class="src src-R"><span style="color: #4e3163;">2</span> <span style="color: #4e3163;">+</span> <span style="color: #4e3163;">2</span>
<span style="color: #6c3163; font-weight: bold;">sum</span><span style="color: #3a81c3;">(</span><span style="color: #4e3163;">2</span>, <span style="color: #4e3163;">2</span><span style="color: #3a81c3;">)</span>
</pre>
</div>

<pre class="example">
&gt; 2 + 2
[1] 4
&gt; sum(2, 2)
[1] 4
&gt;
</pre>

<ol class="org-ol">
<li value="2">Calculate the square root of 10:</li>
</ol>

<div class="org-src-container">
<pre class="src src-R"><span style="color: #6c3163; font-weight: bold;">sqrt</span><span style="color: #3a81c3;">(</span><span style="color: #4e3163;">10</span><span style="color: #3a81c3;">)</span>
<span style="color: #4e3163;">10</span>^<span style="color: #3a81c3;">(</span><span style="color: #4e3163;">1</span><span style="color: #4e3163;">/</span><span style="color: #4e3163;">2</span><span style="color: #3a81c3;">)</span>
</pre>
</div>

<pre class="example">
&gt; sqrt(10)
[1] 3.162278
&gt; 10^(1/2)
[1] 3.162278
&gt;
</pre>

<ol class="org-ol">
<li value="3">Install the "car" package:</li>
</ol>

<p>
<code>In Rstudio, go to the "Packages" tab and click the "Istall" button. Search in the pop-up window and click "Install".</code>
</p>

<ol class="org-ol">
<li value="4">Find "An Introduction to R".</li>
</ol>

<p>
<code>Go to the main help page by running 'help.start() or using the GUI menu, find and click on the link to "An Introduction to R".</code>
</p>

<ol class="org-ol">
<li value="4">Go to <a href="http://cran.r-project.org/web/views/">http://cran.r-project.org/web/views/</a> and skim the topic closest to your field/interests.</li>
</ol>

<p>
<code>I like the machine learning topic</code>
</p>
</div>
</div>
</div>

<div id="outline-container-orgbddb453" class="outline-2">
<h2 id="orgbddb453">Data and Functions</h2>
<div class="outline-text-2" id="text-orgbddb453">
</div><div id="outline-container-org8deae1b" class="outline-3">
<h3 id="org8deae1b">Assignment</h3>
<div class="outline-text-3" id="text-org8deae1b">
<p>
Values can be assigned names and used in subsequent operations
</p>
<ul class="org-ul">
<li>The <code>&lt;-</code> operator (less than followed by a dash) is used to save values</li>
<li>The name on the left gets the value on the right.</li>
</ul>

<div class="org-src-container">
<pre class="src src-R" id="org98ebe0a">x <span style="color: #4e3163;">&lt;-</span> <span style="color: #4e3163;">10</span> <span style="color: #2aa1ae;"># </span><span style="color: #2aa1ae;">Assign the value 10 to a variable named x</span>
x <span style="color: #4e3163;">+</span> <span style="color: #4e3163;">1</span> <span style="color: #2aa1ae;"># </span><span style="color: #2aa1ae;">Add 1 to x</span>
x <span style="color: #2aa1ae;"># </span><span style="color: #2aa1ae;">note that x is unchanged</span>
y <span style="color: #4e3163;">&lt;-</span> x <span style="color: #4e3163;">+</span> <span style="color: #4e3163;">1</span> <span style="color: #2aa1ae;"># </span><span style="color: #2aa1ae;">Assign y the value x + 1</span>
y
x <span style="color: #4e3163;">&lt;-</span> x <span style="color: #4e3163;">+</span> <span style="color: #4e3163;">100</span> <span style="color: #2aa1ae;"># </span><span style="color: #2aa1ae;">change the value of x</span>
y <span style="color: #2aa1ae;">## </span><span style="color: #2aa1ae;">note that y is unchanged.</span>
</pre>
</div>


<pre class="example">
&gt; x &lt;- 10 # Assign the value 10 to a variable named x
&gt; x + 1 # Add 1 to x
[1] 11
&gt; x # note that x is unchanged
[1] 10
&gt; y &lt;- x + 1 # Assign y the value x + 1
&gt; y
[1] 11
&gt; x &lt;- x + 100 # change the value of x
&gt; y ## note that y is unchanged.
[1] 11
&gt;
</pre>


<p>
Saved variables can be listed, overwritten and deleted
</p>
<div class="org-src-container">
<pre class="src src-R" id="orgd605bab"><span style="color: #6c3163; font-weight: bold;">ls</span><span style="color: #3a81c3;">()</span> <span style="color: #2aa1ae;"># </span><span style="color: #2aa1ae;">List variables in workspace</span>
x <span style="color: #2aa1ae;"># </span><span style="color: #2aa1ae;">Print the value of x</span>
x <span style="color: #4e3163;">&lt;-</span> <span style="color: #4e3163;">100</span> <span style="color: #2aa1ae;"># </span><span style="color: #2aa1ae;">Overwrite x. Note that no warning is given!</span>
x
<span style="color: #6c3163; font-weight: bold;">rm</span><span style="color: #3a81c3;">(</span>x<span style="color: #3a81c3;">)</span> <span style="color: #2aa1ae;"># </span><span style="color: #2aa1ae;">Delete x</span>
<span style="color: #6c3163; font-weight: bold;">ls</span><span style="color: #3a81c3;">()</span>
</pre>
</div>

<pre class="example">
&gt; ls() # List variables in workspace
[1] "comet"      "comet.plot" "filter"     "fit"        "nwbuilding"
[6] "x"          "y"         
&gt; x # Print the value of x
[1] 110
&gt; x &lt;- 100 # Overwrite x. Note that no warning is given!
&gt; x
[1] 100
&gt; rm(x) # Delete x
&gt; ls()
[1] "comet"      "comet.plot" "filter"     "fit"        "nwbuilding"
[6] "y"         
&gt;
</pre>
</div>
</div>

<div id="outline-container-orgab9816d" class="outline-3">
<h3 id="orgab9816d">Data types and conversion</h3>
<div class="outline-text-3" id="text-orgab9816d">
<p>
The <code>x</code> and <code>y</code> data objects we created are numeric <i>vectors</i> of length one. Vectors are the simplest data structure in R, and are the building blocks used to make more complex data structures. Here are some more vector examples.
</p>

<div class="org-src-container">
<pre class="src src-R">x <span style="color: #4e3163;">&lt;-</span> <span style="color: #6c3163; font-weight: bold;">c</span><span style="color: #3a81c3;">(</span><span style="color: #4e3163;">10</span>, <span style="color: #4e3163;">11</span>, <span style="color: #4e3163;">12</span><span style="color: #3a81c3;">)</span>
X <span style="color: #4e3163;">&lt;-</span> <span style="color: #6c3163; font-weight: bold;">c</span><span style="color: #3a81c3;">(</span><span style="color: #2d9574;">"10"</span>, <span style="color: #2d9574;">"11"</span>, <span style="color: #2d9574;">"12"</span><span style="color: #3a81c3;">)</span>
y <span style="color: #4e3163;">&lt;-</span> <span style="color: #6c3163; font-weight: bold;">c</span><span style="color: #3a81c3;">(</span><span style="color: #2d9574;">"h"</span>, <span style="color: #2d9574;">"e"</span>, <span style="color: #2d9574;">"l"</span>, <span style="color: #2d9574;">"l"</span>, <span style="color: #2d9574;">"o"</span><span style="color: #3a81c3;">)</span>
Y <span style="color: #4e3163;">&lt;-</span> <span style="color: #2d9574;">"hello"</span>
z <span style="color: #4e3163;">&lt;-</span> <span style="color: #6c3163; font-weight: bold;">c</span><span style="color: #3a81c3;">(</span><span style="color: #4e3163;">1</span>, <span style="color: #4e3163;">0</span>, <span style="color: #4e3163;">1</span>, <span style="color: #4e3163;">1</span><span style="color: #3a81c3;">)</span>
Z <span style="color: #4e3163;">&lt;-</span> <span style="color: #6c3163; font-weight: bold;">c</span><span style="color: #3a81c3;">(</span><span style="color: #ba2f59; font-weight: bold;">TRUE</span>, <span style="color: #ba2f59; font-weight: bold;">FALSE</span>, <span style="color: #ba2f59; font-weight: bold;">TRUE</span>, <span style="color: #ba2f59; font-weight: bold;">TRUE</span><span style="color: #3a81c3;">)</span>
</pre>
</div>

<pre class="example">
&gt; x &lt;- c(10, 11, 12)
&gt; X &lt;- c("10", "11", "12")
&gt; y &lt;- c("h", "e", "l", "l", "o")
&gt; Y &lt;- "hello"
&gt; z &lt;- c(1, 0, 1, 1)
&gt; Z &lt;- c(TRUE, FALSE, TRUE, TRUE)
&gt;
</pre>

<p>
Notice that the <code>c</code> function combines its arguments into a vector.
</p>

<p>
All R objects have a <i>mode</i> and <i>length</i>. Since it is impossible for an object not to have these attributes they are called <i>intrinsic attributes</i>.
</p>
<div class="org-src-container">
<pre class="src src-R"><span style="color: #6c3163; font-weight: bold;">print</span><span style="color: #3a81c3;">(</span>x<span style="color: #3a81c3;">)</span>
<span style="color: #6c3163; font-weight: bold;">mode</span><span style="color: #3a81c3;">(</span>x<span style="color: #3a81c3;">)</span>
<span style="color: #6c3163; font-weight: bold;">length</span><span style="color: #3a81c3;">(</span>x<span style="color: #3a81c3;">)</span>

<span style="color: #6c3163; font-weight: bold;">print</span><span style="color: #3a81c3;">(</span>X<span style="color: #3a81c3;">)</span>
<span style="color: #6c3163; font-weight: bold;">mode</span><span style="color: #3a81c3;">(</span>X<span style="color: #3a81c3;">)</span>
<span style="color: #6c3163; font-weight: bold;">length</span><span style="color: #3a81c3;">(</span>X<span style="color: #3a81c3;">)</span>

<span style="color: #6c3163; font-weight: bold;">length</span><span style="color: #3a81c3;">(</span>y<span style="color: #3a81c3;">)</span>
<span style="color: #6c3163; font-weight: bold;">length</span><span style="color: #3a81c3;">(</span>Y<span style="color: #3a81c3;">)</span>

<span style="color: #6c3163; font-weight: bold;">mode</span><span style="color: #3a81c3;">(</span>z<span style="color: #3a81c3;">)</span>
<span style="color: #6c3163; font-weight: bold;">mode</span><span style="color: #3a81c3;">(</span>Z<span style="color: #3a81c3;">)</span>
</pre>
</div>

<pre class="example">
&gt; print(x)
[1] 10 11 12
&gt; mode(x)
[1] "numeric"
&gt; length(x)
[1] 3
&gt; 
&gt; print(X)
[1] "10" "11" "12"
&gt; mode(X)
[1] "character"
&gt; length(X)
[1] 3
&gt; 
&gt; length(y)
[1] 5
&gt; length(Y)
[1] 1
&gt; 
&gt; mode(z)
[1] "numeric"
&gt; mode(Z)
[1] "logical"
&gt;
</pre>

<p>
Data structures in R can be converted from one type to another using one of the many functions beginning with <code>as.</code>. For example:
</p>
<div class="org-src-container">
<pre class="src src-R"><span style="color: #6c3163; font-weight: bold;">mode</span><span style="color: #3a81c3;">(</span>x<span style="color: #3a81c3;">)</span>
<span style="color: #6c3163; font-weight: bold;">mode</span><span style="color: #3a81c3;">(</span><span style="color: #6c3163; font-weight: bold;">as.character</span><span style="color: #3a81c3;">(</span>x<span style="color: #3a81c3;">))</span>
<span style="color: #6c3163; font-weight: bold;">mode</span><span style="color: #3a81c3;">(</span>X<span style="color: #3a81c3;">)</span>
<span style="color: #6c3163; font-weight: bold;">mode</span><span style="color: #3a81c3;">(</span><span style="color: #6c3163; font-weight: bold;">as.numeric</span><span style="color: #3a81c3;">(</span>X<span style="color: #3a81c3;">))</span>
</pre>
</div>

<pre class="example">
&gt; mode(x)
[1] "numeric"
&gt; mode(as.character(x))
[1] "character"
&gt; mode(X)
[1] "character"
&gt; mode(as.numeric(X))
[1] "numeric"
&gt;
</pre>
</div>
</div>


<div id="outline-container-orga3d58bb" class="outline-3">
<h3 id="orga3d58bb">Functions</h3>
<div class="outline-text-3" id="text-orga3d58bb">
<p>
Using R is mostly about applying <b>functions</b> to <b>variables</b>. Functions
</p>
<ul class="org-ul">
<li>take <b>variable(s)</b> as input <b>argument(s)</b></li>
<li>perform operations</li>
<li><b>return</b> values which can be <b>assigned</b></li>
<li>optionally perform side-effects such as writing a file to disk or opening a graphics window</li>
</ul>

<p>
The general form for calling R functions is 
</p>
<div class="org-src-container">
<pre class="src src-R"><span style="color: #2aa1ae;">## </span><span style="color: #2aa1ae;">FunctionName(arg.1, arg.2, ..., arg.n)</span>
</pre>
</div>

<p>
Arguments can be matched by position or name
</p>

<p>
Examples:
</p>
<div class="org-src-container">
<pre class="src src-R" id="orga3244e9">  <span style="color: #2aa1ae;">#</span><span style="color: #2aa1ae;">?sqrt</span>
  a <span style="color: #4e3163;">&lt;-</span> <span style="color: #6c3163; font-weight: bold;">sqrt</span><span style="color: #3a81c3;">(</span>z<span style="color: #3a81c3;">)</span> <span style="color: #2aa1ae;"># </span><span style="color: #2aa1ae;">Call the sqrt function with argument x=z</span>

<span style="color: #2aa1ae;">## </span><span style="color: #2aa1ae;">look at the arguments to the round function</span>
  <span style="color: #6c3163; font-weight: bold;">args</span><span style="color: #3a81c3;">(</span>round<span style="color: #3a81c3;">)</span> <span style="color: #2aa1ae;"># </span><span style="color: #2aa1ae;">use ?round if you need more information</span>

  <span style="color: #6c3163; font-weight: bold;">round</span><span style="color: #3a81c3;">(</span>a, digits <span style="color: #4e3163;">=</span> <span style="color: #4e3163;">2</span><span style="color: #3a81c3;">)</span> <span style="color: #2aa1ae;"># </span><span style="color: #2aa1ae;">Call round() with arguments x=x and digits=2</span>

  <span style="color: #2aa1ae;">## </span><span style="color: #2aa1ae;">since matching by name takes precedence these are all equivalent:</span>
  <span style="color: #6c3163; font-weight: bold;">round</span><span style="color: #3a81c3;">(</span>a, <span style="color: #4e3163;">2</span><span style="color: #3a81c3;">)</span>
  <span style="color: #6c3163; font-weight: bold;">round</span><span style="color: #3a81c3;">(</span>x <span style="color: #4e3163;">=</span> a, <span style="color: #4e3163;">2</span><span style="color: #3a81c3;">)</span>
  <span style="color: #6c3163; font-weight: bold;">round</span><span style="color: #3a81c3;">(</span>digits <span style="color: #4e3163;">=</span> <span style="color: #4e3163;">2</span>, x <span style="color: #4e3163;">=</span> a<span style="color: #3a81c3;">)</span>

  <span style="color: #2aa1ae;">## </span><span style="color: #2aa1ae;">the only way we can go wrong is by omiting the names and mixing up the order</span>
  <span style="color: #6c3163; font-weight: bold;">round</span><span style="color: #3a81c3;">(</span><span style="color: #4e3163;">2</span>, x<span style="color: #3a81c3;">)</span>

  <span style="color: #2aa1ae;"># </span><span style="color: #2aa1ae;">Functions can be nested so an alternative is</span>
  <span style="color: #6c3163; font-weight: bold;">round</span><span style="color: #3a81c3;">(</span><span style="color: #6c3163; font-weight: bold;">sqrt</span><span style="color: #3a81c3;">(</span>z<span style="color: #3a81c3;">)</span>, digits <span style="color: #4e3163;">=</span> <span style="color: #4e3163;">2</span><span style="color: #3a81c3;">)</span> <span style="color: #2aa1ae;"># </span><span style="color: #2aa1ae;">Take sqrt of a and round</span>
</pre>
</div>

<pre class="example">
&gt;   #?sqrt
&gt;   a &lt;- sqrt(z) # Call the sqrt function with argument x=z
&gt;   
&gt; ## look at the arguments to the round function
&gt;   args(round) # use ?round if you need more information
function (x, digits = 0) 
NULL
&gt; 
&gt;   round(a, digits = 2) # Call round() with arguments x=x and digits=2
[1] 1 0 1 1
&gt; 
&gt;   ## since matching by name takes precedence these are all equivalent:
&gt;   round(a, 2)
[1] 1 0 1 1
&gt;   round(x = a, 2)
[1] 1 0 1 1
&gt;   round(digits = 2, x = a)
[1] 1 0 1 1
&gt; 
&gt;   ## the only way we can go wrong is by omiting the names and mixing up the order
&gt;   round(2, x)
[1] 2 2 2
&gt; 
&gt;   # Functions can be nested so an alternative is
&gt;   round(sqrt(z), digits = 2) # Take sqrt of a and round
[1] 1 0 1 1
&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd5bbf19" class="outline-2">
<h2 id="orgd5bbf19">Asking R for help</h2>
<div class="outline-text-2" id="text-orgd5bbf19">
<p>
R has extensive built-in documentation that can be accessed through R commands or through the GUI.
</p>

<div class="org-src-container">
<pre class="src src-R"><span style="color: #2aa1ae;">## </span><span style="color: #2aa1ae;">Start html help, search/browse using web browser</span>
<span style="color: #6c3163; font-weight: bold;">help.start</span><span style="color: #3a81c3;">()</span> <span style="color: #2aa1ae;"># </span><span style="color: #2aa1ae;">or use the help menu from you GUI</span>
<span style="color: #2aa1ae;">## </span><span style="color: #2aa1ae;">Look up the documentation for a function</span>
<span style="color: #6c3163; font-weight: bold;">help</span><span style="color: #3a81c3;">(</span>plot<span style="color: #3a81c3;">)</span> <span style="color: #2aa1ae;">## </span><span style="color: #2aa1ae;">or use the shortcut: ?plot</span>
<span style="color: #2aa1ae;">## </span><span style="color: #2aa1ae;">Look up documentation for a package</span>
<span style="color: #6c3163; font-weight: bold;">help</span><span style="color: #3a81c3;">(</span>package<span style="color: #4e3163;">=</span><span style="color: #2d9574;">"stats"</span><span style="color: #3a81c3;">)</span>
<span style="color: #2aa1ae;">## </span><span style="color: #2aa1ae;">Search documentation from R (not always the best way... google often works better)</span>
<span style="color: #6c3163; font-weight: bold;">help.search</span><span style="color: #3a81c3;">(</span><span style="color: #2d9574;">"classification"</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>


<div id="outline-container-orgb44e56a" class="outline-2">
<h2 id="orgb44e56a">R packages</h2>
<div class="outline-text-2" id="text-orgb44e56a">
<p>
There are thousands of R packages that extend R's capabilities. Some packages are distributed with R, and some of these are attached to the search path by default. Many more are available in package repositories.
</p>

<div class="org-src-container">
<pre class="src src-R"><span style="color: #2aa1ae;">##</span><span style="color: #2aa1ae;">To see what packages are loaded: </span>
<span style="color: #6c3163; font-weight: bold;">search</span><span style="color: #3a81c3;">()</span>

<span style="color: #2aa1ae;">## </span><span style="color: #2aa1ae;">To view available packages: </span>
<span style="color: #4e3163;">library</span><span style="color: #3a81c3;">()</span>

<span style="color: #2aa1ae;">## </span><span style="color: #2aa1ae;">To load a package: </span>
<span style="color: #4e3163;">library</span><span style="color: #3a81c3;">(</span><span style="color: #2d9574;">"MASS"</span><span style="color: #3a81c3;">)</span>

<span style="color: #2aa1ae;">## </span><span style="color: #2aa1ae;">Install new package: </span>
<span style="color: #6c3163; font-weight: bold;">install.packages</span><span style="color: #3a81c3;">(</span><span style="color: #2d9574;">"stringdist"</span><span style="color: #3a81c3;">)</span>
</pre>
</div>

<p>
In this workshop we will use the <i>tidyverse</i> package. <i>tidyverse</i> is a meta package that loads the <i>dplyr</i> package for easier data manipulation the <i>readr</i> package for easier data import/export, and several other useful packages.
</p>
</div>

<div id="outline-container-orge4b1082" class="outline-3">
<h3 id="orge4b1082">Exercise 1</h3>
<div class="outline-text-3" id="text-orge4b1082">
<p>
The purpose of this exercise is to practice using the package management and help facilities. 
</p>

<ol class="org-ol">
<li>Use the <code>search</code> function to inspect the current search path. Assign the result to the name <code>orig.search.path</code>.</li>
<li>What are the <code>mode</code> and <code>length</code> of <code>orig.search.path</code>?</li>
<li>Install the <i>tidyverse</i> package. Compare the output of <code>search()</code> to the value you've saved in <code>orig.search.path</code>. Has it changed?</li>
<li>Use the <code>library</code> function to attach the <i>tidyverse</i> package. Compare the output of <code>search()</code> to the value you've saved in <code>orig.search.path</code>. Has it changed?</li>
<li>Look up the help page for the <i>readr</i> package. Which function would you use to read a tab delimited file?</li>
</ol>
</div>
</div>

<div id="outline-container-org3f62103" class="outline-3">
<h3 id="org3f62103">Exercise 1 solution&#xa0;&#xa0;&#xa0;<span class="tag"><span class="prototype">prototype</span></span></h3>
<div class="outline-text-3" id="text-org3f62103">
<div class="org-src-container">
<pre class="src src-R"><span style="color: #2aa1ae;">## </span><span style="color: #2aa1ae;">inspect search path</span>
<span style="color: #6c3163; font-weight: bold;">search</span><span style="color: #3a81c3;">()</span>
orig.search.path <span style="color: #4e3163;">&lt;-</span> <span style="color: #6c3163; font-weight: bold;">search</span><span style="color: #3a81c3;">()</span>

<span style="color: #2aa1ae;">## </span><span style="color: #2aa1ae;">install the tidyverse package and check search path</span>
<span style="color: #2aa1ae;"># </span><span style="color: #2aa1ae;">install.pacakges("tidyverse")</span>
<span style="color: #6c3163; font-weight: bold;">search</span><span style="color: #3a81c3;">()</span> <span style="color: #2aa1ae;">## </span><span style="color: #2aa1ae;">unchanged</span>

<span style="color: #2aa1ae;">## </span><span style="color: #2aa1ae;">attach the tidyverse pacakge</span>
<span style="color: #4e3163;">library</span><span style="color: #3a81c3;">(</span><span style="color: #2d9574;">"tidyverse"</span><span style="color: #3a81c3;">)</span>
<span style="color: #6c3163; font-weight: bold;">print</span><span style="color: #3a81c3;">(</span>orig.search.path<span style="color: #3a81c3;">)</span>
<span style="color: #6c3163; font-weight: bold;">search</span><span style="color: #3a81c3;">()</span> <span style="color: #2aa1ae;">## </span><span style="color: #2aa1ae;">different now that we have attached the package using the library function</span>

<span style="color: #2aa1ae;">## </span><span style="color: #2aa1ae;">look up the readr package documentation</span>
<span style="color: #6c3163; font-weight: bold;">help</span><span style="color: #3a81c3;">(</span>package <span style="color: #4e3163;">=</span> <span style="color: #2d9574;">"readr"</span><span style="color: #3a81c3;">)</span>
<span style="color: #2aa1ae;">## </span><span style="color: #2aa1ae;">I would use read_tsv to read a tab delimited file.</span>
</pre>
</div>

<pre class="example">
&gt; ## inspect search path
&gt; search()
 [1] ".GlobalEnv"        "package:stats"     "package:graphics" 
 [4] "package:grDevices" "package:utils"     "package:datasets" 
 [7] "package:haven"     "package:dplyr"     "package:purrr"    
[10] "package:readr"     "package:tidyr"     "package:tibble"   
[13] "package:ggplot2"   "package:tidyverse" "package:methods"  
[16] "Autoloads"         "package:base"     
&gt; orig.search.path &lt;- search()
&gt; 
&gt; ## install the tidyverse package and check search path
&gt; # install.pacakges("tidyverse")
&gt; search() ## unchanged
 [1] ".GlobalEnv"        "package:stats"     "package:graphics" 
 [4] "package:grDevices" "package:utils"     "package:datasets" 
 [7] "package:haven"     "package:dplyr"     "package:purrr"    
[10] "package:readr"     "package:tidyr"     "package:tibble"   
[13] "package:ggplot2"   "package:tidyverse" "package:methods"  
[16] "Autoloads"         "package:base"     
&gt; 
&gt; ## attach the tidyverse pacakge
&gt; library("tidyverse")
&gt; print(orig.search.path)
 [1] ".GlobalEnv"        "package:stats"     "package:graphics" 
 [4] "package:grDevices" "package:utils"     "package:datasets" 
 [7] "package:haven"     "package:dplyr"     "package:purrr"    
[10] "package:readr"     "package:tidyr"     "package:tibble"   
[13] "package:ggplot2"   "package:tidyverse" "package:methods"  
[16] "Autoloads"         "package:base"     
&gt; search() ## different now that we have attached the package using the library function
 [1] ".GlobalEnv"        "package:stats"     "package:graphics" 
 [4] "package:grDevices" "package:utils"     "package:datasets" 
 [7] "package:haven"     "package:dplyr"     "package:purrr"    
[10] "package:readr"     "package:tidyr"     "package:tibble"   
[13] "package:ggplot2"   "package:tidyverse" "package:methods"  
[16] "Autoloads"         "package:base"     
&gt; 
&gt; ## look up the readr package documentation
&gt; help(package = "readr")

		Information on package 'readr'

Description:

Package:            readr
Version:            1.0.0
Title:              Read Tabular Data
Description:        Read flat/tabular text files from disk (or
                    a connection).
Authors@R:          c( person("Hadley", "Wickham", ,
                    "hadley@rstudio.com", c("aut", "cre")),
                    person("Jim", "Hester", ,
                    "jim.hester@rstudio.com", "aut"),
                    person("Romain", "Francois", role =
                    "aut"), person("R Core Team", role =
                    "ctb", comment = "Date time code adapted
                    from R"), person("RStudio", role = "cph"),
                    person("Jukka", "Jäylnki", role = c("ctb",
                    "cph"), comment = "grisu3
                    implementation"), person("Mikkel",
                    "Jørgensen", role = c("ctb", "cph"),
                    comment = "grisu3 implementation"))
Encoding:           UTF-8
Depends:            R (&gt;= 3.0.2)
LinkingTo:          Rcpp, BH
Imports:            Rcpp (&gt;= 0.11.5), curl, tibble, hms, R6
Suggests:           testthat, knitr, rmarkdown, stringi, covr
License:            GPL (&gt;= 2) | file LICENSE
BugReports:         https://github.com/hadley/readr/issues
URL:                https://github.com/hadley/readr
VignetteBuilder:    knitr
RoxygenNote:        5.0.1
NeedsCompilation:   yes
Packaged:           2016-08-03 15:26:00 UTC; hadley
Author:             Hadley Wickham [aut, cre], Jim Hester
                    [aut], Romain Francois [aut], R Core Team
                    [ctb] (Date time code adapted from R),
                    RStudio [cph], Jukka Jäylnki [ctb, cph]
                    (grisu3 implementation), Mikkel Jørgensen
                    [ctb, cph] (grisu3 implementation)
Maintainer:         Hadley Wickham &lt;hadley@rstudio.com&gt;
Repository:         CRAN
Date/Publication:   2016-08-03 17:55:25
Built:              R 3.3.1; x86_64-pc-linux-gnu; 2016-09-06
                    14:30:00 UTC; unix

Index:

cols                    Create column specification
cols_condense           Examine the column specifications for a data
                        frame
count_fields            Count the number of fields in each line of a
                        file.
date_names              Create or retrieve date names
guess_encoding          Guess encoding of file.
locale                  Create locales
parse_atomic            Parse character vector in an atomic vector.
parse_datetime          Parse a character vector of dates or date
                        times.
parse_factor            Parse a character vector into a factor
parse_guess             Parse a character vector into the "best" type.
parse_number            Extract numbers out of an atomic vector
problems                Retrieve parsing problems.
read_delim              Read a delimited file into a data frame.
read_file               Read a file into a string.
read_fwf                Read a fixed width file.
read_lines              Read lines from a file or string.
read_log                Read common/combined log file.
read_rds                Read object from RDS file.
read_table              Read text file where columns are separated by
                        whitespace.
readr_example           Get path to readr example
spec_delim              Retrieve the column specification of a file.
type_convert            Re-convert character columns in existing data
                        frame.
write_delim             Save a data frame to a delimited file.
write_lines             Write lines/ a file
write_rds               Write a single R object to file

Further information is available in the following vignettes in
directory
'/home/izahn/R/x86_64-pc-linux-gnu-library/3.3/readr/doc':

column-types: Column types (source, pdf)
locales: Locales (source, pdf)

&gt; ## I would use read_tsv to read a tab delimited file.
&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf1474a4" class="outline-2">
<h2 id="orgf1474a4">Getting data into R</h2>
<div class="outline-text-2" id="text-orgf1474a4">
</div><div id="outline-container-orgf8e404d" class="outline-3">
<h3 id="orgf8e404d">The baby names data set</h3>
<div class="outline-text-3" id="text-orgf8e404d">
<p>
The examples in this workshop use the baby names data provided by the governments of the United States and the United Kingdom. A cleaned and merged version of these data is in <code>dataSets/babyNames.csv</code>.
</p>
</div>
</div>

<div id="outline-container-org1c83d78" class="outline-3">
<h3 id="org1c83d78">The "working directory" and listing files</h3>
<div class="outline-text-3" id="text-org1c83d78">
<p>
R knows the directory it was started in, and refers to this as the "working directory". Since our workshop examples are in the Rintro folder in your Downloads folder, we should all take a moment to set that as our working directory.
</p>

<div class="org-src-container">
<pre class="src src-R" id="orgd7f18f1"><span style="color: #6c3163; font-weight: bold;">getwd</span><span style="color: #3a81c3;">()</span> <span style="color: #2aa1ae;"># </span><span style="color: #2aa1ae;">what is my current working directory?</span>
<span style="color: #2aa1ae;"># </span><span style="color: #2aa1ae;">setwd("~/Desktop/Rintro") # change directory</span>
</pre>
</div>

<p>
Note that "<code>~</code>" means "my home directory" but that this can mean different things on different operating systems. You can also use the Files tab in Rstudio to navigate to a directory, then click "More -&gt; Set as working directory".
</p>

<p>
We can a set the working directory using paths relative to the current working directory. Once we are in the "Rintro" folder we can navigate to the "dataSets" folder like this:
</p>

<div class="org-src-container">
<pre class="src src-R" id="orgde22c17"><span style="color: #6c3163; font-weight: bold;">getwd</span><span style="color: #3a81c3;">()</span> <span style="color: #2aa1ae;"># </span><span style="color: #2aa1ae;">get the current working directory</span>
<span style="color: #6c3163; font-weight: bold;">setwd</span><span style="color: #3a81c3;">(</span><span style="color: #2d9574;">"dataSets"</span><span style="color: #3a81c3;">)</span> <span style="color: #2aa1ae;"># </span><span style="color: #2aa1ae;">set wd to the dataSets folder</span>
<span style="color: #6c3163; font-weight: bold;">getwd</span><span style="color: #3a81c3;">()</span>
<span style="color: #6c3163; font-weight: bold;">setwd</span><span style="color: #3a81c3;">(</span><span style="color: #2d9574;">".."</span><span style="color: #3a81c3;">)</span> <span style="color: #2aa1ae;"># </span><span style="color: #2aa1ae;">set wd to enclosing folder ("up")</span>
</pre>
</div>

<pre class="example">
&gt; getwd() # get the current working directory
[1] "/home/izahn/Documents/Work/Classes/IQSS_Stats_Workshops/R/Rintro"
&gt; setwd("dataSets") # set wd to the dataSets folder
&gt; getwd()
[1] "/home/izahn/Documents/Work/Classes/IQSS_Stats_Workshops/R/Rintro/dataSets"
&gt; setwd("..") # set wd to enclosing folder ("up")
&gt;
</pre>

<p>
It can be convenient to list files in a directory without leaving R
</p>
<div class="org-src-container">
<pre class="src src-R" id="orgd401a01"><span style="color: #6c3163; font-weight: bold;">list.files</span><span style="color: #3a81c3;">(</span><span style="color: #2d9574;">"dataSets"</span><span style="color: #3a81c3;">)</span> <span style="color: #2aa1ae;"># </span><span style="color: #2aa1ae;">list files in the dataSets folder</span>
</pre>
</div>

<pre class="example">
&gt; list.files("dataSets") # list files in the dataSets folder
[1] "babyNames.csv"
&gt;
</pre>
</div>
</div>

<div id="outline-container-org3841252" class="outline-3">
<h3 id="org3841252">Readers for common file types</h3>
<div class="outline-text-3" id="text-org3841252">
<p>
In order to read data from a file, you have to know what kind of file it is. The table below lists the functions that can import data from common file formats.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">data type</th>
<th scope="col" class="org-left">function</th>
<th scope="col" class="org-left">package</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">comma separated (.csv)</td>
<td class="org-left">read<sub>csv</sub>()</td>
<td class="org-left">readr (tidyverse)</td>
</tr>

<tr>
<td class="org-left">other delimited formats</td>
<td class="org-left">read<sub>delim</sub>()</td>
<td class="org-left">readr (tidyverse)</td>
</tr>

<tr>
<td class="org-left">R (.Rds)</td>
<td class="org-left">read<sub>rds</sub>()</td>
<td class="org-left">readr (tidyverse)</td>
</tr>

<tr>
<td class="org-left">Stata (.dta)</td>
<td class="org-left">read<sub>stata</sub>()</td>
<td class="org-left">haven (tidyverse, needs to be attached separately)</td>
</tr>

<tr>
<td class="org-left">SPSS (.sav)</td>
<td class="org-left">read<sub>spss</sub>()</td>
<td class="org-left">haven (tidyverse, needs to be attached separately)</td>
</tr>

<tr>
<td class="org-left">SAS (.sas7bdat)</td>
<td class="org-left">read<sub>sas</sub>()</td>
<td class="org-left">haven (tidyverse, needs to be attached separately)</td>
</tr>

<tr>
<td class="org-left">Excel (.xls, .xlsx)</td>
<td class="org-left">read<sub>excel</sub></td>
<td class="org-left">readxl (tidyverse, needs to be attached separately)</td>
</tr>
</tbody>
</table>
</div>
</div>


<div id="outline-container-orgab1d4b3" class="outline-3">
<h3 id="orgab1d4b3">Exercise 2</h3>
<div class="outline-text-3" id="text-orgab1d4b3">
<p>
The purpose of this exercise is to practice reading data into R. The data in "<code>dataSets/babyNames.csv</code>" is moderately tricky to read, making it a good data set to practice on. 
</p>

<ol class="org-ol">
<li>Open the help page for the <code>read_csv</code> function. How can you limit the number of rows to be read in?</li>
<li>Read just the first 10 rows of "<code>dataSets/babyNames.csv</code>". Notice that the "Sex" column has been read as a logical (TRUE/FALSE).</li>
<li>Read the <code>read_csv</code> help page to figure out how to make it read the "Sex" column as a character. Make adjustments to your code until you have read in the first 10 rows with the correct column types. "Year" and "Name.length" should be integer (int), "Count" and "Percent" should be double (dbl) and everything else should be character (chr).</li>
<li>Once you have successfully read in the first 10 rows, read the whole file, assigning the result to the name <code>baby.names</code>.</li>
</ol>
</div>
</div>

<div id="outline-container-org9660e3b" class="outline-3">
<h3 id="org9660e3b">Exercise 2 solution&#xa0;&#xa0;&#xa0;<span class="tag"><span class="prototype">prototype</span></span></h3>
<div class="outline-text-3" id="text-org9660e3b">
<div class="org-src-container">
<pre class="src src-R"><span style="color: #2aa1ae;">## </span><span style="color: #2aa1ae;">read ?read_csv</span>
<span style="color: #2aa1ae;">## </span><span style="color: #2aa1ae;">limit rows with n_max argument</span>
<span style="color: #6c3163; font-weight: bold;">read_csv</span><span style="color: #3a81c3;">(</span><span style="color: #2d9574;">"dataSets/babyNames.csv"</span>, n_max <span style="color: #4e3163;">=</span> <span style="color: #4e3163;">10</span><span style="color: #3a81c3;">)</span>

<span style="color: #2aa1ae;">## </span><span style="color: #2aa1ae;">specify column types in the col_types argument</span>
<span style="color: #6c3163; font-weight: bold;">read_csv</span><span style="color: #3a81c3;">(</span><span style="color: #2d9574;">"dataSets/babyNames.csv"</span>, n_max <span style="color: #4e3163;">=</span> <span style="color: #4e3163;">10</span>, col_types <span style="color: #4e3163;">=</span> <span style="color: #2d9574;">"??c????????????"</span><span style="color: #3a81c3;">)</span>

<span style="color: #2aa1ae;">## </span><span style="color: #2aa1ae;">read all the data</span>
baby.names <span style="color: #4e3163;">&lt;-</span> <span style="color: #6c3163; font-weight: bold;">read_csv</span><span style="color: #3a81c3;">(</span><span style="color: #2d9574;">"dataSets/babyNames.csv"</span>, col_types <span style="color: #4e3163;">=</span> <span style="color: #2d9574;">"??c????????????"</span><span style="color: #3a81c3;">)</span>
</pre>
</div>

<pre class="example">
&gt; ## read ?read_csv
&gt; ## limit rows with n_max argument
&gt; read_csv("dataSets/babyNames.csv", n_max = 10)
# A tibble: 10 × 15
            Location  Year   Sex      Name Count  Percent
               &lt;chr&gt; &lt;int&gt; &lt;lgl&gt;     &lt;chr&gt; &lt;dbl&gt;    &lt;dbl&gt;
1  England and Wales  1996 FALSE    sophie  7087 2.394273
2  England and Wales  1996 FALSE     chloe  6824 2.305421
3  England and Wales  1996 FALSE   jessica  6711 2.267245
4  England and Wales  1996 FALSE     emily  6415 2.167244
5  England and Wales  1996 FALSE    lauren  6299 2.128055
6  England and Wales  1996 FALSE    hannah  5916 1.998662
7  England and Wales  1996 FALSE charlotte  5866 1.981770
8  England and Wales  1996 FALSE   rebecca  5828 1.968932
9  England and Wales  1996 FALSE       amy  5206 1.758796
10 England and Wales  1996 FALSE     megan  4948 1.671633
# ... with 9 more variables: Sounds.like &lt;chr&gt;,
#   Alternative.spellings &lt;chr&gt;, Name.length &lt;int&gt;, First.1 &lt;chr&gt;,
#   First.2 &lt;chr&gt;, First.3 &lt;chr&gt;, Last.1 &lt;chr&gt;, Last.2 &lt;chr&gt;,
#   Last.3 &lt;chr&gt;
&gt; 
&gt; ## specify column types in the col_types argument
&gt; read_csv("dataSets/babyNames.csv", n_max = 10, col_types = "??c????????????")
# A tibble: 10 × 15
            Location  Year   Sex      Name Count  Percent
               &lt;chr&gt; &lt;int&gt; &lt;chr&gt;     &lt;chr&gt; &lt;dbl&gt;    &lt;dbl&gt;
1  England and Wales  1996     F    sophie  7087 2.394273
2  England and Wales  1996     F     chloe  6824 2.305421
3  England and Wales  1996     F   jessica  6711 2.267245
4  England and Wales  1996     F     emily  6415 2.167244
5  England and Wales  1996     F    lauren  6299 2.128055
6  England and Wales  1996     F    hannah  5916 1.998662
7  England and Wales  1996     F charlotte  5866 1.981770
8  England and Wales  1996     F   rebecca  5828 1.968932
9  England and Wales  1996     F       amy  5206 1.758796
10 England and Wales  1996     F     megan  4948 1.671633
# ... with 9 more variables: Sounds.like &lt;chr&gt;,
#   Alternative.spellings &lt;chr&gt;, Name.length &lt;int&gt;, First.1 &lt;chr&gt;,
#   First.2 &lt;chr&gt;, First.3 &lt;chr&gt;, Last.1 &lt;chr&gt;, Last.2 &lt;chr&gt;,
#   Last.3 &lt;chr&gt;
&gt; 
&gt; ## read all the data
&gt; baby.names &lt;- read_csv("dataSets/babyNames.csv", col_types = "??c????????????")
&gt;
</pre>
</div>
</div>

<div id="outline-container-orgbe2fbde" class="outline-3">
<h3 id="orgbe2fbde">Checking imported data</h3>
<div class="outline-text-3" id="text-orgbe2fbde">
<p>
It is always a good idea  to examine the imported data set&#x2013;usually we want the results to be a <code>data.frame</code>
</p>
<div class="org-src-container">
<pre class="src src-R" id="org6d599fb"><span style="color: #2aa1ae;">## </span><span style="color: #2aa1ae;">we know that this object will have mode and length, because all R objects do.</span>
<span style="color: #6c3163; font-weight: bold;">mode</span><span style="color: #3a81c3;">(</span>baby.names<span style="color: #3a81c3;">)</span>
<span style="color: #6c3163; font-weight: bold;">length</span><span style="color: #3a81c3;">(</span>baby.names<span style="color: #3a81c3;">)</span> <span style="color: #2aa1ae;"># </span><span style="color: #2aa1ae;">number of columns</span>

<span style="color: #2aa1ae;">## </span><span style="color: #2aa1ae;">additional information about this data object</span>
<span style="color: #6c3163; font-weight: bold;">class</span><span style="color: #3a81c3;">(</span>baby.names<span style="color: #3a81c3;">)</span> <span style="color: #2aa1ae;"># </span><span style="color: #2aa1ae;">check to see that test is a data.frame</span>
<span style="color: #6c3163; font-weight: bold;">dim</span><span style="color: #3a81c3;">(</span>baby.names<span style="color: #3a81c3;">)</span> <span style="color: #2aa1ae;"># </span><span style="color: #2aa1ae;">how many rows and columns?</span>
<span style="color: #6c3163; font-weight: bold;">names</span><span style="color: #3a81c3;">(</span>baby.names<span style="color: #3a81c3;">)</span> <span style="color: #2aa1ae;"># </span><span style="color: #2aa1ae;">or colnames(baby.names)</span>
<span style="color: #6c3163; font-weight: bold;">str</span><span style="color: #3a81c3;">(</span>baby.names<span style="color: #3a81c3;">)</span> <span style="color: #2aa1ae;"># </span><span style="color: #2aa1ae;">more details</span>
<span style="color: #6c3163; font-weight: bold;">glimpse</span><span style="color: #3a81c3;">(</span>baby.names<span style="color: #3a81c3;">)</span> <span style="color: #2aa1ae;"># </span><span style="color: #2aa1ae;">details, more compactly</span>
</pre>
</div>

<pre class="example">
&gt; ## we know that this object will have mode and length, because all R objects do.
&gt; mode(baby.names)
[1] "list"
&gt; length(baby.names) # number of columns
[1] 15
&gt; 
&gt; ## additional information about this data object
&gt; class(baby.names) # check to see that test is a data.frame
[1] "tbl_df"     "tbl"        "data.frame"
&gt; dim(baby.names) # how many rows and columns?
[1] 1966001      15
&gt; names(baby.names) # or colnames(baby.names)
 [1] "Location"              "Year"                 
 [3] "Sex"                   "Name"                 
 [5] "Count"                 "Percent"              
 [7] "Sounds.like"           "Alternative.spellings"
 [9] "Name.length"           "First.1"              
[11] "First.2"               "First.3"              
[13] "Last.1"                "Last.2"               
[15] "Last.3"               
&gt; str(baby.names) # more details
Classes 'tbl_df', 'tbl' and 'data.frame':	1966001 obs. of  15 variables:
 $ Location             : chr  "England and Wales" "England and Wales" "England and Wales" "England and Wales" ...
 $ Year                 : int  1996 1996 1996 1996 1996 1996 1996 1996 1996 1996 ...
 $ Sex                  : chr  "F" "F" "F" "F" ...
 $ Name                 : chr  "sophie" "chloe" "jessica" "emily" ...
 $ Count                : num  7087 6824 6711 6415 6299 ...
 $ Percent              : num  2.39 2.31 2.27 2.17 2.13 ...
 $ Sounds.like          : chr  "SAFY/SF" "CHL/XL" "JASAC/JSK" "ENALY/EML" ...
 $ Alternative.spellings: chr  "saffie/sofie/sophee/sophie/sophie-/sophy" "chloe/chloe-" "jasika/jassica/jesica/jesika/jesseca/jessic/jessica/jessica-/jessika" "emalee/emalie/emaly/emelee/emelie/emelly/emely/emilee/emiley/emilie/emillee/emillie/emilly/emily/emily-/emmalee/emma-lee/emmali"| __truncated__ ...
 $ Name.length          : int  6 5 7 5 6 6 9 7 3 5 ...
 $ First.1              : chr  "s" "c" "j" "e" ...
 $ First.2              : chr  "so" "ch" "je" "em" ...
 $ First.3              : chr  "sop" "chl" "jes" "emi" ...
 $ Last.1               : chr  "e" "e" "a" "y" ...
 $ Last.2               : chr  "ie" "oe" "ca" "ly" ...
 $ Last.3               : chr  "hie" "loe" "ica" "ily" ...
 - attr(*, "spec")=List of 2
  ..$ cols   :List of 15
  .. ..$ Location             : list()
  .. .. ..- attr(*, "class")= chr  "collector_character" "collector"
  .. ..$ Year                 : list()
  .. .. ..- attr(*, "class")= chr  "collector_integer" "collector"
  .. ..$ Sex                  : list()
  .. .. ..- attr(*, "class")= chr  "collector_character" "collector"
  .. ..$ Name                 : list()
  .. .. ..- attr(*, "class")= chr  "collector_character" "collector"
  .. ..$ Count                : list()
  .. .. ..- attr(*, "class")= chr  "collector_double" "collector"
  .. ..$ Percent              : list()
  .. .. ..- attr(*, "class")= chr  "collector_double" "collector"
  .. ..$ Sounds.like          : list()
  .. .. ..- attr(*, "class")= chr  "collector_character" "collector"
  .. ..$ Alternative.spellings: list()
  .. .. ..- attr(*, "class")= chr  "collector_character" "collector"
  .. ..$ Name.length          : list()
  .. .. ..- attr(*, "class")= chr  "collector_integer" "collector"
  .. ..$ First.1              : list()
  .. .. ..- attr(*, "class")= chr  "collector_character" "collector"
  .. ..$ First.2              : list()
  .. .. ..- attr(*, "class")= chr  "collector_character" "collector"
  .. ..$ First.3              : list()
  .. .. ..- attr(*, "class")= chr  "collector_character" "collector"
  .. ..$ Last.1               : list()
  .. .. ..- attr(*, "class")= chr  "collector_character" "collector"
  .. ..$ Last.2               : list()
  .. .. ..- attr(*, "class")= chr  "collector_character" "collector"
  .. ..$ Last.3               : list()
  .. .. ..- attr(*, "class")= chr  "collector_character" "collector"
  ..$ default: list()
  .. ..- attr(*, "class")= chr  "collector_guess" "collector"
  ..- attr(*, "class")= chr "col_spec"
&gt; glimpse(baby.names) # details, more compactly
Observations: 1,966,001
Variables: 15
$ Location              &lt;chr&gt; "England and Wales", "England and W...
$ Year                  &lt;int&gt; 1996, 1996, 1996, 1996, 1996, 1996,...
$ Sex                   &lt;chr&gt; "F", "F", "F", "F", "F", "F", "F", ...
$ Name                  &lt;chr&gt; "sophie", "chloe", "jessica", "emil...
$ Count                 &lt;dbl&gt; 7087, 6824, 6711, 6415, 6299, 5916,...
$ Percent               &lt;dbl&gt; 2.3942729, 2.3054210, 2.2672450, 2....
$ Sounds.like           &lt;chr&gt; "SAFY/SF", "CHL/XL", "JASAC/JSK", "...
$ Alternative.spellings &lt;chr&gt; "saffie/sofie/sophee/sophie/sophie-...
$ Name.length           &lt;int&gt; 6, 5, 7, 5, 6, 6, 9, 7, 3, 5, 7, 5,...
$ First.1               &lt;chr&gt; "s", "c", "j", "e", "l", "h", "c", ...
$ First.2               &lt;chr&gt; "so", "ch", "je", "em", "la", "ha",...
$ First.3               &lt;chr&gt; "sop", "chl", "jes", "emi", "lau", ...
$ Last.1                &lt;chr&gt; "e", "e", "a", "y", "n", "h", "e", ...
$ Last.2                &lt;chr&gt; "ie", "oe", "ca", "ly", "en", "ah",...
$ Last.3                &lt;chr&gt; "hie", "loe", "ica", "ily", "ren", ...
&gt;
</pre>
</div>
</div>
</div>


<div id="outline-container-org2894223" class="outline-2">
<h2 id="org2894223">Data Manipulation</h2>
<div class="outline-text-2" id="text-org2894223">
</div><div id="outline-container-org638fad8" class="outline-3">
<h3 id="org638fad8">data.frame objects</h3>
<div class="outline-text-3" id="text-org638fad8">
<p>
Usually data read into R will be stored as a <b>data.frame</b>
</p>

<ul class="org-ul">
<li>A data.frame is a list of vectors of equal length
<ul class="org-ul">
<li>Each vector in the list forms a column</li>
<li>Each column can be a differnt type of vector</li>
<li>Typically columns are variables and the rows are observations</li>
</ul></li>
</ul>

<p>
A data.frame has two dimensions corresponding the number of rows and the number of columns (in that order)
</p>
</div>
</div>

<div id="outline-container-org14102c3" class="outline-3">
<h3 id="org14102c3">Slice and Filter data.frames rows</h3>
<div class="outline-text-3" id="text-org14102c3">
<p>
You can extract subsets of data.frames using <code>slice</code> to select rows by number and <code>filter</code> to select rows that match some condition. It works like this:
</p>

<div class="org-src-container">
<pre class="src src-R" id="org4412e44"><span style="color: #2aa1ae;">## </span><span style="color: #2aa1ae;">make up some example data</span>
<span style="color: #3a81c3;">(</span>example.df <span style="color: #4e3163;">&lt;-</span> <span style="color: #6c3163; font-weight: bold;">data.frame</span><span style="color: #3a81c3;">(</span>id  <span style="color: #4e3163;">=</span> <span style="color: #6c3163; font-weight: bold;">rep</span><span style="color: #3a81c3;">(</span>letters<span style="color: #3a81c3;">[</span><span style="color: #4e3163;">1</span>:<span style="color: #4e3163;">4</span><span style="color: #3a81c3;">]</span>, each <span style="color: #4e3163;">=</span> <span style="color: #4e3163;">4</span><span style="color: #3a81c3;">)</span>,
                          t   <span style="color: #4e3163;">=</span> <span style="color: #6c3163; font-weight: bold;">rep</span><span style="color: #3a81c3;">(</span><span style="color: #4e3163;">1</span>:<span style="color: #4e3163;">4</span>, times <span style="color: #4e3163;">=</span> <span style="color: #4e3163;">4</span><span style="color: #3a81c3;">)</span>,
                          var1 <span style="color: #4e3163;">=</span> <span style="color: #6c3163; font-weight: bold;">runif</span><span style="color: #3a81c3;">(</span><span style="color: #4e3163;">16</span><span style="color: #3a81c3;">)</span>,
                          var2 <span style="color: #4e3163;">=</span> <span style="color: #6c3163; font-weight: bold;">sample</span><span style="color: #3a81c3;">(</span>letters<span style="color: #3a81c3;">[</span><span style="color: #4e3163;">1</span>:<span style="color: #4e3163;">3</span><span style="color: #3a81c3;">]</span>, <span style="color: #4e3163;">16</span>, replace <span style="color: #4e3163;">=</span> <span style="color: #ba2f59; font-weight: bold;">TRUE</span><span style="color: #3a81c3;">)))</span>

<span style="color: #2aa1ae;">## </span><span style="color: #2aa1ae;">rows 2 and 4</span>
<span style="color: #6c3163; font-weight: bold;">slice</span><span style="color: #3a81c3;">(</span>example.df, <span style="color: #6c3163; font-weight: bold;">c</span><span style="color: #3a81c3;">(</span><span style="color: #4e3163;">2</span>, <span style="color: #4e3163;">4</span><span style="color: #3a81c3;">))</span>

<span style="color: #2aa1ae;">## </span><span style="color: #2aa1ae;">rows where id == "a"</span>
<span style="color: #6c3163; font-weight: bold;">filter</span><span style="color: #3a81c3;">(</span>example.df, id <span style="color: #4e3163;">==</span> <span style="color: #2d9574;">"a"</span><span style="color: #3a81c3;">)</span>

<span style="color: #2aa1ae;">## </span><span style="color: #2aa1ae;">rows where id is either "a" or "b"</span>
<span style="color: #6c3163; font-weight: bold;">filter</span><span style="color: #3a81c3;">(</span>example.df, id <span style="color: #4e3163;">%in%</span> <span style="color: #6c3163; font-weight: bold;">c</span><span style="color: #3a81c3;">(</span><span style="color: #2d9574;">"a"</span>, <span style="color: #2d9574;">"b"</span><span style="color: #3a81c3;">))</span>
</pre>
</div>

<pre class="example">
&gt; ## make up some example data
&gt; (example.df &lt;- data.frame(id  = rep(letters[1:4], each = 4),
+                           t   = rep(1:4, times = 4),
+                           var1 = runif(16),
+                           var2 = sample(letters[1:3], 16, replace = TRUE)))
   id t      var1 var2
1   a 1 0.4110324    c
2   a 2 0.6100210    b
3   a 3 0.1482942    c
4   a 4 0.8145195    a
5   b 1 0.4792361    b
6   b 2 0.3801964    c
7   b 3 0.6870040    b
8   b 4 0.4567090    a
9   c 1 0.2459155    c
10  c 2 0.2863364    a
11  c 3 0.1401366    b
12  c 4 0.6435420    c
13  d 1 0.5189124    a
14  d 2 0.4717837    b
15  d 3 0.8312323    a
16  d 4 0.8857985    b
&gt; 
&gt; ## rows 2 and 4
&gt; slice(example.df, c(2, 4))
  id t      var1 var2
1  a 2 0.6100210    b
2  a 4 0.8145195    a
&gt; 
&gt; ## rows where id == "a"
&gt; filter(example.df, id == "a")
  id t      var1 var2
1  a 1 0.4110324    c
2  a 2 0.6100210    b
3  a 3 0.1482942    c
4  a 4 0.8145195    a
&gt; 
&gt; ## rows where id is either "a" or "b"
&gt; filter(example.df, id %in% c("a", "b"))
  id t      var1 var2
1  a 1 0.4110324    c
2  a 2 0.6100210    b
3  a 3 0.1482942    c
4  a 4 0.8145195    a
5  b 1 0.4792361    b
6  b 2 0.3801964    c
7  b 3 0.6870040    b
8  b 4 0.4567090    a
&gt;
</pre>
</div>
</div>

<div id="outline-container-org78ec638" class="outline-3">
<h3 id="org78ec638">Select data.frame columns</h3>
<div class="outline-text-3" id="text-org78ec638">
<p>
<code>slice</code> and <code>filter</code> are used to extract rows. <code>select</code> is used to extract columns
</p>
<div class="org-src-container">
<pre class="src src-R"><span style="color: #6c3163; font-weight: bold;">select</span><span style="color: #3a81c3;">(</span>example.df, id, var1<span style="color: #3a81c3;">)</span>
<span style="color: #6c3163; font-weight: bold;">select</span><span style="color: #3a81c3;">(</span>example.df, id, t, var1<span style="color: #3a81c3;">)</span>
</pre>
</div>

<pre class="example">
&gt; select(example.df, id, var1)
   id      var1
1   a 0.4110324
2   a 0.6100210
3   a 0.1482942
4   a 0.8145195
5   b 0.4792361
6   b 0.3801964
7   b 0.6870040
8   b 0.4567090
9   c 0.2459155
10  c 0.2863364
11  c 0.1401366
12  c 0.6435420
13  d 0.5189124
14  d 0.4717837
15  d 0.8312323
16  d 0.8857985
&gt; select(example.df, id, t, var1)
   id t      var1
1   a 1 0.4110324
2   a 2 0.6100210
3   a 3 0.1482942
4   a 4 0.8145195
5   b 1 0.4792361
6   b 2 0.3801964
7   b 3 0.6870040
8   b 4 0.4567090
9   c 1 0.2459155
10  c 2 0.2863364
11  c 3 0.1401366
12  c 4 0.6435420
13  d 1 0.5189124
14  d 2 0.4717837
15  d 3 0.8312323
16  d 4 0.8857985
&gt;
</pre>

<p>
You can also conveniently select a single column using <code>$</code>, like this:
</p>
<div class="org-src-container">
<pre class="src src-R">example.df$t
</pre>
</div>

<pre class="example">
&gt; example.df$t
 [1] 1 2 3 4 1 2 3 4 1 2 3 4 1 2 3 4
&gt;
</pre>

<p>
Data manipulation commands can be combined:
</p>

<div class="org-src-container">
<pre class="src src-R"><span style="color: #6c3163; font-weight: bold;">filter</span><span style="color: #3a81c3;">(</span><span style="color: #6c3163; font-weight: bold;">select</span><span style="color: #3a81c3;">(</span>example.df,
              id,
              var1<span style="color: #3a81c3;">)</span>,
       id <span style="color: #4e3163;">==</span> <span style="color: #2d9574;">"a"</span><span style="color: #3a81c3;">)</span>
</pre>
</div>

<pre class="example">
&gt; filter(select(example.df,
+               id,
+               var1),
+        id == "a")
  id      var1
1  a 0.4110324
2  a 0.6100210
3  a 0.1482942
4  a 0.8145195
&gt;
</pre>

<p>
In the previous example we used == to filter rows where id was "a". Other relational and logical operators are listed below.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Operator</th>
<th scope="col" class="org-left">Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">==</td>
<td class="org-left">equal to</td>
</tr>

<tr>
<td class="org-left">!=</td>
<td class="org-left">not equal to</td>
</tr>

<tr>
<td class="org-left">&gt;</td>
<td class="org-left">greater than</td>
</tr>

<tr>
<td class="org-left">&gt;=</td>
<td class="org-left">greater than or equal to</td>
</tr>

<tr>
<td class="org-left">&lt;</td>
<td class="org-left">less than</td>
</tr>

<tr>
<td class="org-left">&lt;=</td>
<td class="org-left">less than or equal to</td>
</tr>

<tr>
<td class="org-left">%in%</td>
<td class="org-left">contained in</td>
</tr>

<tr>
<td class="org-left">&amp;</td>
<td class="org-left">and</td>
</tr>

<tr>
<td class="org-left">&vert;</td>
<td class="org-left">or</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org573f1a2" class="outline-3">
<h3 id="org573f1a2">Adding, removing, and modifying data.frame columns</h3>
<div class="outline-text-3" id="text-org573f1a2">
<p>
You can modify data.frames using the <code>mutate()</code> function. It works like this:
</p>

<div class="org-src-container">
<pre class="src src-R" id="orge2cbfea">example.df

<span style="color: #2aa1ae;">## </span><span style="color: #2aa1ae;">modify example.df and assign the modified data.frame the name example.df</span>
example.df <span style="color: #4e3163;">&lt;-</span> <span style="color: #6c3163; font-weight: bold;">mutate</span><span style="color: #3a81c3;">(</span>example.df,
       var2 <span style="color: #4e3163;">=</span> var1<span style="color: #4e3163;">/</span>t, <span style="color: #2aa1ae;"># </span><span style="color: #2aa1ae;">replace the values in var2</span>
       var3 <span style="color: #4e3163;">=</span> <span style="color: #4e3163;">1</span>:<span style="color: #6c3163; font-weight: bold;">length</span><span style="color: #3a81c3;">(</span>t<span style="color: #3a81c3;">)</span>, <span style="color: #2aa1ae;"># </span><span style="color: #2aa1ae;">create a new column named var3</span>
       var4 <span style="color: #4e3163;">=</span> <span style="color: #6c3163; font-weight: bold;">factor</span><span style="color: #3a81c3;">(</span>letters<span style="color: #3a81c3;">[</span>t<span style="color: #3a81c3;">])</span>,
       t <span style="color: #4e3163;">=</span> <span style="color: #ba2f59; font-weight: bold;">NULL</span> <span style="color: #2aa1ae;"># </span><span style="color: #2aa1ae;">delete the column named t</span>
       <span style="color: #3a81c3;">)</span>

<span style="color: #2aa1ae;">## </span><span style="color: #2aa1ae;">examine our changes</span>
example.df
</pre>
</div>

<pre class="example">
&gt; example.df
   id t      var1 var2
1   a 1 0.4110324    c
2   a 2 0.6100210    b
3   a 3 0.1482942    c
4   a 4 0.8145195    a
5   b 1 0.4792361    b
6   b 2 0.3801964    c
7   b 3 0.6870040    b
8   b 4 0.4567090    a
9   c 1 0.2459155    c
10  c 2 0.2863364    a
11  c 3 0.1401366    b
12  c 4 0.6435420    c
13  d 1 0.5189124    a
14  d 2 0.4717837    b
15  d 3 0.8312323    a
16  d 4 0.8857985    b
&gt; 
&gt; ## modify example.df and assign the modified data.frame the name example.df
&gt; example.df &lt;- mutate(example.df,
+        var2 = var1/t, # replace the values in var2
+        var3 = 1:length(t), # create a new column named var3
+        var4 = factor(letters[t]),
+        t = NULL # delete the column named t
+        )
&gt; 
&gt; ## examine our changes
&gt; example.df
   id      var1       var2 var3 var4
1   a 0.4110324 0.41103236    1    a
2   a 0.6100210 0.30501051    2    b
3   a 0.1482942 0.04943139    3    c
4   a 0.8145195 0.20362988    4    d
5   b 0.4792361 0.47923614    5    a
6   b 0.3801964 0.19009822    6    b
7   b 0.6870040 0.22900134    7    c
8   b 0.4567090 0.11417726    8    d
9   c 0.2459155 0.24591552    9    a
10  c 0.2863364 0.14316821   10    b
11  c 0.1401366 0.04671222   11    c
12  c 0.6435420 0.16088550   12    d
13  d 0.5189124 0.51891245   13    a
14  d 0.4717837 0.23589185   14    b
15  d 0.8312323 0.27707744   15    c
16  d 0.8857985 0.22144961   16    d
&gt;
</pre>
</div>
</div>

<div id="outline-container-orgc538081" class="outline-3">
<h3 id="orgc538081">Exporting Data</h3>
<div class="outline-text-3" id="text-orgc538081">
<p>
Now that we have made some changes to our data set, we might want to save those changes to a file.
</p>
<div class="org-src-container">
<pre class="src src-R" id="org94394af"><span style="color: #2aa1ae;"># </span><span style="color: #2aa1ae;">write data to a .csv file</span>
<span style="color: #6c3163; font-weight: bold;">write_csv</span><span style="color: #3a81c3;">(</span>example.df, path <span style="color: #4e3163;">=</span> <span style="color: #2d9574;">"example.csv"</span><span style="color: #3a81c3;">)</span>

<span style="color: #2aa1ae;"># </span><span style="color: #2aa1ae;">write data to an R file</span>
<span style="color: #6c3163; font-weight: bold;">write_rds</span><span style="color: #3a81c3;">(</span>example.df, path <span style="color: #4e3163;">=</span> <span style="color: #2d9574;">"example.rds"</span><span style="color: #3a81c3;">)</span>

<span style="color: #2aa1ae;"># </span><span style="color: #2aa1ae;">write data to a Stata file</span>
<span style="color: #4e3163;">library</span><span style="color: #3a81c3;">(</span>haven<span style="color: #3a81c3;">)</span>
<span style="color: #6c3163; font-weight: bold;">write_dta</span><span style="color: #3a81c3;">(</span>example.df, path <span style="color: #4e3163;">=</span> <span style="color: #2d9574;">"example.dta"</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org32307c9" class="outline-3">
<h3 id="org32307c9">Saving and loading R  workspaces</h3>
<div class="outline-text-3" id="text-org32307c9">
<p>
In addition to importing individual datasets, R can save and load entire workspaces
</p>
<div class="org-src-container">
<pre class="src src-R" id="org7c98289"><span style="color: #6c3163; font-weight: bold;">ls</span><span style="color: #3a81c3;">()</span> <span style="color: #2aa1ae;"># </span><span style="color: #2aa1ae;">list objects in our workspace</span>
<span style="color: #6c3163; font-weight: bold;">save.image</span><span style="color: #3a81c3;">(</span>file<span style="color: #4e3163;">=</span><span style="color: #2d9574;">"myWorkspace.RData"</span><span style="color: #3a81c3;">)</span> <span style="color: #2aa1ae;"># </span><span style="color: #2aa1ae;">save workspace </span>
<span style="color: #6c3163; font-weight: bold;">rm</span><span style="color: #3a81c3;">(</span>list<span style="color: #4e3163;">=</span><span style="color: #6c3163; font-weight: bold;">ls</span><span style="color: #3a81c3;">())</span> <span style="color: #2aa1ae;"># </span><span style="color: #2aa1ae;">remove all objects from our workspace </span>
<span style="color: #6c3163; font-weight: bold;">ls</span><span style="color: #3a81c3;">()</span> <span style="color: #2aa1ae;"># </span><span style="color: #2aa1ae;">list stored objects to make sure they are deleted</span>
</pre>
</div>

<pre class="example">
&gt; ls() # list objects in our workspace
 [1] "a"                "baby.names"       "comet"           
 [4] "comet.plot"       "example.df"       "filter"          
 [7] "fit"              "nwbuilding"       "orig.search.path"
[10] "x"                "X"                "y"               
[13] "Y"                "z"                "Z"               
&gt; save.image(file="myWorkspace.RData") # save workspace 
&gt; rm(list=ls()) # remove all objects from our workspace 
&gt; ls() # list stored objects to make sure they are deleted
character(0)
&gt;
</pre>

<p>
Load the "myWorkspace.RData" file and check that it is restored
</p>

<div class="org-src-container">
<pre class="src src-R" id="org84652a0"><span style="color: #6c3163; font-weight: bold;">load</span><span style="color: #3a81c3;">(</span><span style="color: #2d9574;">"myWorkspace.RData"</span><span style="color: #3a81c3;">)</span> <span style="color: #2aa1ae;"># </span><span style="color: #2aa1ae;">load myWorkspace.RData</span>
<span style="color: #6c3163; font-weight: bold;">ls</span><span style="color: #3a81c3;">()</span> <span style="color: #2aa1ae;"># </span><span style="color: #2aa1ae;">list objects</span>
</pre>
</div>

<pre class="example">
&gt; load("myWorkspace.RData") # load myWorkspace.RData
&gt; ls() # list objects
 [1] "a"                "baby.names"       "comet"           
 [4] "comet.plot"       "example.df"       "filter"          
 [7] "fit"              "nwbuilding"       "orig.search.path"
[10] "x"                "X"                "y"               
[13] "Y"                "z"                "Z"               
&gt;
</pre>
</div>
</div>


<div id="outline-container-org21c0451" class="outline-3">
<h3 id="org21c0451">Exercise 3: Data manipulation</h3>
<div class="outline-text-3" id="text-org21c0451">
<p>
Read in the "babyNames.csv" file if you have not already done so, assigning the result to <code>baby.names</code>.
</p>

<ol class="org-ol">
<li>Filter <code>baby.names</code> to show only names given to at least 3 percent of boys.</li>
<li>Create a column named "Proportion" equal to Percent divided by 100.</li>
<li>Filter <code>baby.names</code> to include only names given to at least 3 percent of Girls. Save this to a Stata data set named "popularGirlNames.dta")</li>
</ol>
</div>
</div>

<div id="outline-container-org6362867" class="outline-3">
<h3 id="org6362867">Exercise 3 solution&#xa0;&#xa0;&#xa0;<span class="tag"><span class="prototype">prototype</span></span></h3>
<div class="outline-text-3" id="text-org6362867">
<div class="org-src-container">
<pre class="src src-R"><span style="color: #6c3163; font-weight: bold;">filter</span><span style="color: #3a81c3;">(</span>baby.names, Sex <span style="color: #4e3163;">==</span> <span style="color: #2d9574;">"M"</span> &amp; Percent <span style="color: #4e3163;">&gt;=</span> <span style="color: #4e3163;">3</span><span style="color: #3a81c3;">)</span>

baby.names <span style="color: #4e3163;">&lt;-</span> <span style="color: #6c3163; font-weight: bold;">mutate</span><span style="color: #3a81c3;">(</span>baby.names, Proportion <span style="color: #4e3163;">=</span> Percent<span style="color: #4e3163;">/</span><span style="color: #4e3163;">100</span><span style="color: #3a81c3;">)</span>

popular.girl.names <span style="color: #4e3163;">&lt;-</span> <span style="color: #6c3163; font-weight: bold;">filter</span><span style="color: #3a81c3;">(</span>baby.names, Sex <span style="color: #4e3163;">==</span> <span style="color: #2d9574;">"F"</span> &amp; Percent <span style="color: #4e3163;">&gt;=</span> <span style="color: #4e3163;">3</span><span style="color: #3a81c3;">)</span>

<span style="color: #6c3163; font-weight: bold;">write_csv</span><span style="color: #3a81c3;">(</span>popular.girl.names, path <span style="color: #4e3163;">=</span> <span style="color: #2d9574;">"popularGirlNames.dta"</span><span style="color: #3a81c3;">)</span>
</pre>
</div>

<pre class="example">
&gt; filter(baby.names, Sex == "M" &amp; Percent &gt;= 3)
# A tibble: 111 × 16
            Location  Year   Sex   Name Count  Percent Sounds.like
               &lt;chr&gt; &lt;int&gt; &lt;chr&gt;  &lt;chr&gt; &lt;dbl&gt;    &lt;dbl&gt;       &lt;chr&gt;
1  England and Wales  1996     M   jack 10779 3.384121      JAC/JK
2  England and Wales  1996     M daniel 10338 3.245667   DANAL/TNL
3  England and Wales  1996     M thomas  9603 3.014910    THAN/0MS
4  England and Wales  1997     M   jack 10145 3.226227      JAC/JK
5  England and Wales  1997     M  james  9853 3.133368     JAN/JMS
6  England and Wales  1997     M thomas  9479 3.014431    THAN/0MS
7  England and Wales  1998     M   jack  9845 3.170958      JAC/JK
8  England and Wales  1998     M thomas  9468 3.049531    THAN/0MS
9  England and Wales  1999     M   jack  9785 3.226806      JAC/JK
10 England and Wales  1999     M thomas  9454 3.117652    THAN/0MS
# ... with 101 more rows, and 9 more variables:
#   Alternative.spellings &lt;chr&gt;, Name.length &lt;int&gt;, First.1 &lt;chr&gt;,
#   First.2 &lt;chr&gt;, First.3 &lt;chr&gt;, Last.1 &lt;chr&gt;, Last.2 &lt;chr&gt;,
#   Last.3 &lt;chr&gt;, Proportion &lt;dbl&gt;
&gt; 
&gt; baby.names &lt;- mutate(baby.names, Proportion = Percent/100)
&gt; 
&gt; popular.girl.names &lt;- filter(baby.names, Sex == "F" &amp; Percent &gt;= 3)
&gt; 
&gt; write_csv(popular.girl.names, path = "popularGirlNames.dta")
&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-org34832c8" class="outline-2">
<h2 id="org34832c8">Basic Statistics and Graphs</h2>
<div class="outline-text-2" id="text-org34832c8">
</div><div id="outline-container-org22cfece" class="outline-3">
<h3 id="org22cfece">Basic statistics</h3>
<div class="outline-text-3" id="text-org22cfece">
<p>
Descriptive statistics of single variables are straightforward:
</p>
<div class="org-src-container">
<pre class="src src-R" id="orgeeca2f0"><span style="color: #6c3163; font-weight: bold;">sum</span><span style="color: #3a81c3;">(</span>example.df$var1<span style="color: #3a81c3;">)</span> <span style="color: #2aa1ae;"># </span><span style="color: #2aa1ae;">calculate sum of var 1</span>
<span style="color: #6c3163; font-weight: bold;">mean</span><span style="color: #3a81c3;">(</span>example.df$var1<span style="color: #3a81c3;">)</span>
<span style="color: #6c3163; font-weight: bold;">median</span><span style="color: #3a81c3;">(</span>example.df$var1<span style="color: #3a81c3;">)</span>
<span style="color: #6c3163; font-weight: bold;">sd</span><span style="color: #3a81c3;">(</span>example.df$var1<span style="color: #3a81c3;">)</span> <span style="color: #2aa1ae;"># </span><span style="color: #2aa1ae;">calculate standard deviation of var1</span>
<span style="color: #6c3163; font-weight: bold;">var</span><span style="color: #3a81c3;">(</span>example.df$var1<span style="color: #3a81c3;">)</span>

<span style="color: #2aa1ae;">## </span><span style="color: #2aa1ae;">summaries of individual columns</span>
<span style="color: #6c3163; font-weight: bold;">summary</span><span style="color: #3a81c3;">(</span>example.df$var1<span style="color: #3a81c3;">)</span>
<span style="color: #6c3163; font-weight: bold;">summary</span><span style="color: #3a81c3;">(</span>example.df$var2<span style="color: #3a81c3;">)</span>

<span style="color: #2aa1ae;">## </span><span style="color: #2aa1ae;">summary of whole data.frame</span>
<span style="color: #6c3163; font-weight: bold;">summary</span><span style="color: #3a81c3;">(</span>example.df<span style="color: #3a81c3;">)</span>
</pre>
</div>

<pre class="example">
&gt; 
&gt; sum(example.df$var1) # calculate sum of var 1
[1] 8.01067
&gt; mean(example.df$var1)
[1] 0.5006669
&gt; median(example.df$var1)
[1] 0.4755099
&gt; sd(example.df$var1) # calculate standard deviation of var1
[1] 0.2329931
&gt; var(example.df$var1)
[1] 0.0542858
&gt; 
&gt; ## summaries of individual columns
&gt; summary(example.df$var1)
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
 0.1401  0.3567  0.4755  0.5007  0.6544  0.8858 
&gt; summary(example.df$var2)
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
0.04671 0.15650 0.22520 0.23950 0.28410 0.51890 
&gt; 
&gt; ## summary of whole data.frame
&gt; summary(example.df)
 id         var1             var2              var3       var4 
 a:4   Min.   :0.1401   Min.   :0.04671   Min.   : 1.00   a:4  
 b:4   1st Qu.:0.3567   1st Qu.:0.15646   1st Qu.: 4.75   b:4  
 c:4   Median :0.4755   Median :0.22523   Median : 8.50   c:4  
 d:4   Mean   :0.5007   Mean   :0.23948   Mean   : 8.50   d:4  
       3rd Qu.:0.6544   3rd Qu.:0.28406   3rd Qu.:12.25        
       Max.   :0.8858   Max.   :0.51891   Max.   :16.00        
&gt;
</pre>

<p>
Some of these functions (e.g., summary) will also work with data.frames and other types of objects, others (such as <code>sd</code>) will not.
</p>
</div>
</div>

<div id="outline-container-orgee8128e" class="outline-3">
<h3 id="orgee8128e">Statistics by grouping variable(s)</h3>
<div class="outline-text-3" id="text-orgee8128e">
<p>
The <code>summarize</code> function can be used to calculate statistics by grouping variable. Here is how it works.
</p>

<div class="org-src-container">
<pre class="src src-R"><span style="color: #6c3163; font-weight: bold;">summarize</span><span style="color: #3a81c3;">(</span><span style="color: #6c3163; font-weight: bold;">group_by</span><span style="color: #3a81c3;">(</span>example.df, id<span style="color: #3a81c3;">)</span>, <span style="color: #6c3163; font-weight: bold;">mean</span><span style="color: #3a81c3;">(</span>var1<span style="color: #3a81c3;">)</span>, <span style="color: #6c3163; font-weight: bold;">sd</span><span style="color: #3a81c3;">(</span>var1<span style="color: #3a81c3;">))</span>
</pre>
</div>

<pre class="example">
&gt; summarize(group_by(example.df, id), mean(var1), sd(var1))
# A tibble: 4 × 3
      id `mean(var1)` `sd(var1)`
  &lt;fctr&gt;        &lt;dbl&gt;      &lt;dbl&gt;
1      a    0.4959668  0.2843556
2      b    0.5007864  0.1311820
3      c    0.3289826  0.2185782
4      d    0.6769317  0.2117308
&gt;
</pre>

<p>
You can group by multiple variables:
</p>

<div class="org-src-container">
<pre class="src src-R"><span style="color: #6c3163; font-weight: bold;">summarize</span><span style="color: #3a81c3;">(</span><span style="color: #6c3163; font-weight: bold;">group_by</span><span style="color: #3a81c3;">(</span>example.df, id, var3<span style="color: #3a81c3;">)</span>, <span style="color: #6c3163; font-weight: bold;">mean</span><span style="color: #3a81c3;">(</span>var1<span style="color: #3a81c3;">)</span>, <span style="color: #6c3163; font-weight: bold;">sd</span><span style="color: #3a81c3;">(</span>var1<span style="color: #3a81c3;">))</span>
</pre>
</div>

<pre class="example">
&gt; summarize(group_by(example.df, id, var3), mean(var1), sd(var1))
Source: local data frame [16 x 4]
Groups: id [?]

       id  var3 `mean(var1)` `sd(var1)`
   &lt;fctr&gt; &lt;int&gt;        &lt;dbl&gt;      &lt;dbl&gt;
1       a     1    0.4110324         NA
2       a     2    0.6100210         NA
3       a     3    0.1482942         NA
4       a     4    0.8145195         NA
5       b     5    0.4792361         NA
6       b     6    0.3801964         NA
7       b     7    0.6870040         NA
8       b     8    0.4567090         NA
9       c     9    0.2459155         NA
10      c    10    0.2863364         NA
11      c    11    0.1401366         NA
12      c    12    0.6435420         NA
13      d    13    0.5189124         NA
14      d    14    0.4717837         NA
15      d    15    0.8312323         NA
16      d    16    0.8857985         NA
&gt;
</pre>

<p>
#+END<sub>SRC</sub>
</p>
</div>
</div>
<div id="outline-container-orgc50f2f8" class="outline-3">
<h3 id="orgc50f2f8">Save R output to a file</h3>
<div class="outline-text-3" id="text-orgc50f2f8">
<p>
Earlier we learned how to write a data set to a file. But what if we want to write something that isn't in a nice rectangular format, like the output of <code>summary</code>? For that we can use the <code>sink()</code> function:
</p>

<div class="org-src-container">
<pre class="src src-R" id="org030285f"><span style="color: #6c3163; font-weight: bold;">sink</span><span style="color: #3a81c3;">(</span>file<span style="color: #4e3163;">=</span><span style="color: #2d9574;">"output.txt"</span>, split<span style="color: #4e3163;">=</span><span style="color: #ba2f59; font-weight: bold;">TRUE</span><span style="color: #3a81c3;">)</span> <span style="color: #2aa1ae;"># </span><span style="color: #2aa1ae;">start logging</span>
<span style="color: #6c3163; font-weight: bold;">print</span><span style="color: #3a81c3;">(</span><span style="color: #2d9574;">"This is the summary of example.df \n"</span><span style="color: #3a81c3;">)</span>
<span style="color: #6c3163; font-weight: bold;">print</span><span style="color: #3a81c3;">(</span><span style="color: #6c3163; font-weight: bold;">summary</span><span style="color: #3a81c3;">(</span>example.df<span style="color: #3a81c3;">))</span>
<span style="color: #6c3163; font-weight: bold;">sink</span><span style="color: #3a81c3;">()</span> <span style="color: #2aa1ae;">## </span><span style="color: #2aa1ae;">sink with no arguments turns logging off</span>
</pre>
</div>

<pre class="example">
&gt; sink(file="output.txt", split=TRUE) # start logging
&gt; print("This is the summary of example.df \n")
[1] "This is the summary of example.df \n"
&gt; print(summary(example.df))
 id         var1             var2              var3       var4 
 a:4   Min.   :0.1401   Min.   :0.04671   Min.   : 1.00   a:4  
 b:4   1st Qu.:0.3567   1st Qu.:0.15646   1st Qu.: 4.75   b:4  
 c:4   Median :0.4755   Median :0.22523   Median : 8.50   c:4  
 d:4   Mean   :0.5007   Mean   :0.23948   Mean   : 8.50   d:4  
       3rd Qu.:0.6544   3rd Qu.:0.28406   3rd Qu.:12.25        
       Max.   :0.8858   Max.   :0.51891   Max.   :16.00        
&gt; sink() ## sink with no arguments turns logging off
&gt;
</pre>
</div>
</div>

<div id="outline-container-org5685e03" class="outline-3">
<h3 id="org5685e03">Exercise 4</h3>
<div class="outline-text-3" id="text-org5685e03">
<ol class="org-ol">
<li>Calculate the total number of children born.</li>
<li>Filter the data to extract only Massachusetts (Location "MA"), and calculate the total number of children born in Massachusetts.</li>
<li>Group and summarize the data to calculate the number of children born each year.</li>
<li>Calculate the average number of characters in baby names (using the "Name.length" column).</li>
<li>Group and summarize to calculate the average number of characters in baby names for each location.</li>
</ol>
</div>
</div>

<div id="outline-container-orgf425c3f" class="outline-3">
<h3 id="orgf425c3f">Exercise 4 solution&#xa0;&#xa0;&#xa0;<span class="tag"><span class="prototype">prototype</span></span></h3>
<div class="outline-text-3" id="text-orgf425c3f">
<div class="org-src-container">
<pre class="src src-R"><span style="color: #6c3163; font-weight: bold;">sum</span><span style="color: #3a81c3;">(</span>baby.names$Count<span style="color: #3a81c3;">)</span>

<span style="color: #6c3163; font-weight: bold;">sum</span><span style="color: #3a81c3;">(</span><span style="color: #6c3163; font-weight: bold;">filter</span><span style="color: #3a81c3;">(</span>baby.names, Location <span style="color: #4e3163;">==</span> <span style="color: #2d9574;">"MA"</span><span style="color: #3a81c3;">)</span>$Count<span style="color: #3a81c3;">)</span>

<span style="color: #6c3163; font-weight: bold;">summarize</span><span style="color: #3a81c3;">(</span><span style="color: #6c3163; font-weight: bold;">group_by</span><span style="color: #3a81c3;">(</span>baby.names, <span style="color: #2d9574;">"Year"</span><span style="color: #3a81c3;">)</span>, <span style="color: #6c3163; font-weight: bold;">sum</span><span style="color: #3a81c3;">(</span>Count<span style="color: #3a81c3;">))</span>

<span style="color: #6c3163; font-weight: bold;">mean</span><span style="color: #3a81c3;">(</span>baby.names$Name.length<span style="color: #3a81c3;">)</span>

<span style="color: #6c3163; font-weight: bold;">summarize</span><span style="color: #3a81c3;">(</span><span style="color: #6c3163; font-weight: bold;">group_by</span><span style="color: #3a81c3;">(</span>baby.names, Location<span style="color: #3a81c3;">)</span>, <span style="color: #6c3163; font-weight: bold;">mean</span><span style="color: #3a81c3;">(</span>Name.length<span style="color: #3a81c3;">))</span>
</pre>
</div>

<pre class="example">
&gt; sum(baby.names$Count)
[1] 76865321
&gt; 
&gt; sum(filter(baby.names, Location == "MA")$Count)
[1] 1232841
&gt; 
&gt; summarize(group_by(baby.names, "Year"), sum(Count))
# A tibble: 1 × 2
  `"Year"` `sum(Count)`
     &lt;chr&gt;        &lt;dbl&gt;
1     Year     76865321
&gt; 
&gt; mean(baby.names$Name.length)
[1] 5.978752
&gt; 
&gt; summarize(group_by(baby.names, Location), mean(Name.length))
# A tibble: 52 × 2
            Location `mean(Name.length)`
               &lt;chr&gt;               &lt;dbl&gt;
1                 AK            5.897870
2                 AL            6.036649
3                 AR            5.951802
4                 AZ            6.005845
5                 CA            6.002446
6                 CO            5.929564
7                 CT            5.941373
8                 DC            5.860574
9                 DE            5.948870
10 England and Wales            6.152505
# ... with 42 more rows
&gt;
</pre>
</div>
</div>


<div id="outline-container-org89888d5" class="outline-3">
<h3 id="org89888d5">Basic graphics: Frequency bars</h3>
<div class="outline-text-3" id="text-org89888d5">
<p>
Thanks to classes and methods, you can <code>plot()</code> many  kinds of objects:
</p>

<div class="org-src-container">
<pre class="src src-R" id="org5b033e9"><span style="color: #6c3163; font-weight: bold;">plot</span><span style="color: #3a81c3;">(</span>example.df$var4<span style="color: #3a81c3;">)</span>
</pre>
</div>



<div class="figure">
<p><img src="images/examplePlot1.png" alt="examplePlot1.png" />
</p>
</div>
</div>
</div>


<div id="outline-container-orgaef74b7" class="outline-3">
<h3 id="orgaef74b7">Basic graphics: Boxplots by group</h3>
<div class="outline-text-3" id="text-orgaef74b7">
<p>
Thanks to classes and methods, you can <code>plot()</code> many kinds of objects:
</p>
<div class="org-src-container">
<pre class="src src-R" id="orga0fd1e3"><span style="color: #6c3163; font-weight: bold;">plot</span><span style="color: #3a81c3;">(</span><span style="color: #6c3163; font-weight: bold;">select</span><span style="color: #3a81c3;">(</span>example.df, id, var1<span style="color: #3a81c3;">))</span>
</pre>
</div>


<div class="figure">
<p><img src="images/examplePlot2.png" alt="examplePlot2.png" />
</p>
</div>
</div>
</div>


<div id="outline-container-org032a011" class="outline-3">
<h3 id="org032a011">Basic graphics: Mosaic chart</h3>
<div class="outline-text-3" id="text-org032a011">
<p>
Thanks to classes and methods, you can <code>plot()</code> many kinds of objects:
</p>
<div class="org-src-container">
<pre class="src src-R" id="org7d88f8c"><span style="color: #6c3163; font-weight: bold;">plot</span><span style="color: #3a81c3;">(</span><span style="color: #6c3163; font-weight: bold;">select</span><span style="color: #3a81c3;">(</span>example.df, id, var4<span style="color: #3a81c3;">))</span>
</pre>
</div>


<div class="figure">
<p><img src="images/examplePlot3.png" alt="examplePlot3.png" />
</p>
</div>
</div>
</div>


<div id="outline-container-org52e1eee" class="outline-3">
<h3 id="org52e1eee">Basic graphics: scatter plot</h3>
<div class="outline-text-3" id="text-org52e1eee">
<div class="org-src-container">
<pre class="src src-R" id="org7fee9ef"><span style="color: #6c3163; font-weight: bold;">plot</span><span style="color: #3a81c3;">(</span><span style="color: #6c3163; font-weight: bold;">select</span><span style="color: #3a81c3;">(</span>example.df, var1, var2<span style="color: #3a81c3;">))</span>
</pre>
</div>


<div class="figure">
<p><img src="images/examplePlot4.png" alt="examplePlot4.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-org1d1eb19" class="outline-3">
<h3 id="org1d1eb19">Exercise 5 TBD</h3>
</div>
</div>


<div id="outline-container-orgbdb3517" class="outline-2">
<h2 id="orgbdb3517">Wrap-up</h2>
<div class="outline-text-2" id="text-orgbdb3517">
</div><div id="outline-container-org595a3c9" class="outline-3">
<h3 id="org595a3c9">Help us make this workshop better!</h3>
<div class="outline-text-3" id="text-org595a3c9">
<ul class="org-ul">
<li>Please take a moment to fill out a very short feedback form</li>
<li>These workshops exist for you – tell us what you need!</li>
<li><a href="http://tinyurl.com/R-intro-feedback">http://tinyurl.com/R-intro-feedback</a></li>
</ul>
</div>
</div>

<div id="outline-container-org2fd43d0" class="outline-3">
<h3 id="org2fd43d0">Additional resources</h3>
<div class="outline-text-3" id="text-org2fd43d0">
<ul class="org-ul">
<li>IQSS workshops: <a href="http://projects.iq.harvard.edu/rtc/filter_by/workshops">http://projects.iq.harvard.edu/rtc/filter_by/workshops</a></li>
<li>IQSS statistical consulting: <a href="http://dss.iq.harvard.edu">http://dss.iq.harvard.edu</a></li>
<li>Software (all free!):
<ul class="org-ul">
<li>R and R package download: <a href="http://cran.r-project.org">http://cran.r-project.org</a></li>
<li>Rstudio download: <a href="http://rstudio.org">http://rstudio.org</a></li>
<li>ESS (emacs R package): <a href="http://ess.r-project.org/">http://ess.r-project.org/</a></li>
</ul></li>
<li>Online tutorials
<ul class="org-ul">
<li><a href="http://www.codeschool.com/courses/try-r">http://www.codeschool.com/courses/try-r</a></li>
<li><a href="http://www.datacamp.org">http://www.datacamp.org</a></li>
<li><a href="http://swirlstats.com/">http://swirlstats.com/</a></li>
<li><a href="http://r4ds.had.co.nz/">http://r4ds.had.co.nz/</a></li>
</ul></li>
<li>Getting help:
<ul class="org-ul">
<li>Documentation and tutorials: <a href="http://cran.r-project.org/other-docs.html">http://cran.r-project.org/other-docs.html</a></li>
<li>Recommended R packages by topic: <a href="http://cran.r-project.org/web/views/">http://cran.r-project.org/web/views/</a></li>
<li>Mailing list: <a href="https://stat.ethz.ch/mailman/listinfo/r-help">https://stat.ethz.ch/mailman/listinfo/r-help</a></li>
<li>StackOverflow: <a href="http://stackoverflow.com/questions/tagged/r">http://stackoverflow.com/questions/tagged/r</a></li>
</ul></li>
</ul>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p><span xmlns:dct='http://purl.org/dc/terms/' property='dct:title'> These workshop notes </span> by <a xmlns:cc='http://creativecommons.org/ns#' href='http://dss.iq.harvard.edu' property='cc:attributionName' rel='cc:attributionURL'>Harvard University</a> are licensed <a rel='license' href='http://creativecommons.org/licenses/by-sa/4.0/'><img alt='Creative Commons License' style='border-width:0' src='https://i.creativecommons.org/l/by-sa/4.0/80x15.png' /></a>. Presented by <a href='http://dss.iq.harvard.edu'>Data Science Services</a> at <a href='http://iq.harvard.edu'> IQSS</a></p>
</div>
</body>
</html>
